(function(x,v){x.HAPVolumeSlider=function(k){function B(b){if(!q){if("touchstart"==b.type){if(b=b.originalEvent.touches,!(b&&0<b.length))return!1}else b.preventDefault();q=!0;t.on(l.moveEvent,function(a){a:{if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();
y(c)}}).on(l.upEvent,function(a){a:if(q){q=!1;t.off(l.moveEvent).off(l.upEvent);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();y(c);e&&e.hide()}})}return!1}function y(b){m?(d=Math.max(0,Math.min(1,(b.pageY-g.offset().top)/h)),d=1-d):d=Math.max(0,Math.min(1,
(b.pageX-g.offset().left)/h));r.setVolume()}function z(b){var a=m?b.pageY-g.offset().top:b.pageX-g.offset().left;0>a?a=0:a>h&&(a=h);a=Math.max(0,Math.min(1,a/h));if(!HAPUtils.isNumber(a))return!1;m&&(a=1-a);a=parseInt(100*a,10);e.text(a+" %");a=k.container[0].getBoundingClientRect();var c=f[0].getBoundingClientRect();if(m){var n=parseInt(c.left-a.left-e.outerWidth()/2+f.outerWidth()/2);b=parseInt(b.pageY-A.scrollTop()-a.top-e.outerHeight()-20);b<c.top-a.top-e.outerHeight()-10?b=c.top-a.top-e.outerHeight()-
10:b>c.top-a.top+f.outerHeight()-e.outerHeight()&&(b=c.top-a.top+f.outerHeight()-e.outerHeight())}else n=parseInt(b.pageX-A.scrollLeft()-a.left-e.outerWidth()/2),b=parseInt(c.top-a.top-e.outerHeight())-15,n<c.left-a.left?n=c.left-a.left:n>c.left-a.left+f.outerWidth()-e.outerWidth()&&(n=c.left-a.left+f.outerWidth()-e.outerWidth());0>b+a.top&&(b=parseInt(c.top-a.top+e.outerHeight()+20));e.css({left:n+"px",top:b+"px"}).show()}var r=this,C=HAPUtils.isMobile(),A=v(x),e=k.tooltip,p=k.container.find(".hap-volume-toggle"),
f=k.container.find(".hap-volume-seekbar"),g=k.container.find(".hap-volume-bg"),D=k.container.find(".hap-volume-level"),t=v(document),l=HAPUtils.getEvents(),d=k.volume,w=.5,q,m=f.hasClass("hap-volume-vertical"),h=m?g.height():g.width();0>d?d=0:1<d&&(d=1);0!=d&&(w=d);if(0==f.length||p.hasClass("hap-volume-toggable"))p.on("click",function(){r.toggleMute()});f.on(l.downEvent,function(b){B(b);return!1});this.toggleMute=function(){0<d?(w=d,d=0):d=w;r.setVolume()};this.setVolume=function(b,a){"undefined"!==
typeof b&&(d=b);var c=m?"height":"width";HAPUtils.isNumber(h)||(h=m?g.height():g.width());D.css(c,d*h+"px");p.children().hide();0==d?p.find(".hap-btn-volume-off").show():0<d&&.5>d?p.find(".hap-btn-volume-down").show():p.find(".hap-btn-volume-up").show();void 0==a&&v(r).trigger("HAPVolumeSlider.VOLUME_CHANGE",d)};if(e&&!C){var u=function(){f.off(l.moveEvent,z).off("mouseout",u);t.off("mouseout",u);e.hide()};f.on("mouseover",function(){q||(f.on(l.moveEvent,z).on("mouseout",u),t.on("mouseout",u))})}r.setVolume(d,
!0)}})(window,jQuery);