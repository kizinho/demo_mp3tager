var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(f){var c=0;return function(){return c<f.length?{done:!1,value:f[c++]}:{done:!0}}};$jscomp.arrayIterator=function(f){return{next:$jscomp.arrayIteratorImpl(f)}};$jscomp.makeIterator=function(f){var c="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return c?c.call(f):$jscomp.arrayIterator(f)};
(function(f){var c=function(){};c.isEmpty=function(g){return 0==g.replace(/^\s+|\s+$/g,"").length};c.strip=function(g){return g.replace(/^\s+|\s+$/g,"")};c.isNumber=function(g){return!isNaN(parseFloat(g))&&isFinite(g)};c.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)};c.isChrome=function(){return!!f.chrome&&(!!f.chrome.webstore||!!f.chrome.runtime)};c.isSafari=function(){return 0<Object.prototype.toString.call(f.HTMLElement).indexOf("Constructor")};
c.isIE=function(){var g=-1;if("Microsoft Internet Explorer"==navigator.appName){var u=navigator.userAgent,t=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=t.exec(u)&&(g=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(u=navigator.userAgent,t=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=t.exec(u)&&(g=parseFloat(RegExp.$1)));return-1!=g?!0:!1};c.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)};c.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")};c.hasDownloadSupport=
function(){return"download"in document.createElement("a")};c.qualifyURL=function(g){var u=document.createElement("a");u.href=g;return u.href};c.relativePath=function(g){return/^(?:[a-z]+:)?\/\//i.test(g)};c.closestNumber=function(g,u){return g.reduce(function(t,B){return Math.abs(B-u)<Math.abs(t-u)?B:t})};c.hasLocalStorage=function(){try{return"localStorage"in f&&null!==f.localStorage}catch(g){return!1}};c.volumeCanBeSet=function(){var g=document.createElement("audio");if(!g)return!1;g.volume=0;return 0==
g.volume?!0:!1};c.randomiseArray=function(g){var u=[],t=[],B;for(B=0;B<g;B++)u[B]=B;for(B=0;B<g;B++){var H=Math.round(Math.random()*(u.length-1));t[B]=u[H];u.splice(H,1)}return t};c.valueLimit=function(g,u,t){return g<u?u:g>t?t:g};c.sortArray=function(g,u){var t,B=g.length,H=[];for(t=0;t<B;t++)H[t]=g[u[t]];return H};c.sortNumericArray=function(g){g.sort(function(u,t){return u-t})};c.shuffleArray=function(g){for(var u=g.length-1;0<u;u--){var t=Math.floor(Math.random()*(u+1)),B=$jscomp.makeIterator([g[t],
g[u]]);g[u]=B.next().value;g[t]=B.next().value}return g};c.keysrt=function(g,u,t){var B=1;t&&(B=-1);return g.sort(function(H,L){var ka=H[u],C=L[u];return B*(ka<C?-1:ka>C?1:0)})};c.keysrt2=function(g,u,t,B){var H=1;B&&(H=-1);return g.sort(function(L,ka){var C=L[u][t],ca=ka[u][t];return H*(C<ca?-1:C>ca?1:0)})};c.keysrt3=function(g,u,t){g.sort(function(B,H){var L=H[t];return u.indexOf(B[t])>u.indexOf(L)?1:-1});return g};c.parseXML=function(g){if(f.ActiveXObject&&f.GetObject){var u=new ActiveXObject("Microsoft.XMLDOM");
u.loadXML(g);return u}if(f.DOMParser)return(new DOMParser).parseFromString(g,"text/xml");throw Error("No XML parser available");};c.formatTime=function(g){g=parseInt(g,10);var u=Math.floor(g/3600),t=Math.floor((g-3600*u)/60);g=g-3600*u-60*t;if(0<u)return 10>u&&(u="0"+u),10>t&&(t="0"+t),10>g&&(g="0"+g),u+":"+t+":"+g;10>t&&(t="0"+t);10>g&&(g="0"+g);return t+":"+g};c.formatTimeWithMiliseconds=function(g){var u=parseInt(g.split(":")[0]),t=parseInt(g.split(":")[1]),B=parseInt(g.split(":")[2]);g=parseInt(g.split(",")[1]||
g.split(".")[1]);return Math.round(100*(3600*u+60*t+B+g/1E3))/100};c.toSeconds=function(g){g=g.split(/[\.:,]+/);return Number(3600*+g[0]+60*+g[1]+ +g[2])};c.formatNumber=function(g){return 9>g?"0"+(g+1):g+1};c.nFormatter=function(g,u){var t=[{value:1E18,symbol:"E"},{value:1E15,symbol:"P"},{value:1E12,symbol:"T"},{value:1E9,symbol:"G"},{value:1E6,symbol:"M"},{value:1E3,symbol:"k"}],B=/\.0+$|(\.[0-9]*[1-9])0+$/,H;for(H=0;H<t.length;H++)if(g>=t[H].value)return(g/t[H].value).toFixed(u).replace(B,"$1")+
t[H].symbol;return g.toFixed(u).replace(B,"$1")};c.hmsToSecondsOnly=function(g){g=g.split(":");for(var u=0,t=1;0<g.length;)u+=t*parseInt(g.pop()),t*=60;return u};c.canPlayMp3=function(){var g=document.createElement("audio");return!(!g.canPlayType||!g.canPlayType("audio/mpeg;").replace(/no/,""))};c.canPlayWav=function(){var g=document.createElement("audio");return!(!g.canPlayType||!g.canPlayType("audio/wav;").replace(/no/,""))};c.canPlayAac=function(){var g=document.createElement("audio");return!(!g.canPlayType||
!g.canPlayType("audio/aac;").replace(/no/,""))};c.canPlayOgg=function(){var g=document.createElement("audio");return!(!g.canPlayType||!g.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""))};c.canPlayFlac=function(){var g=document.createElement("audio");return!(!g.canPlayType||!g.canPlayType("audio/flac;").replace(/no/,""))};c.hasCanvas=function(){return!!document.createElement("canvas")};c.getElementOffsetTop=function(g){g=g.getBoundingClientRect();var u=document.body,t=document.documentElement;
return Math.round(g.bottom-100+(f.pageYOffset||t.scrollTop||u.scrollTop)-(t.clientTop||u.clientTop||0))};c.getScrollTop=function(g){g=document.documentElement;return(f.pageYOffset||g.scrollTop)-(g.clientTop||0)};c.getEvents=function(){var g={};"ontouchstart"in f?(g.downEvent="touchstart mousedown",g.moveEvent="touchmove mousemove",g.upEvent="touchend mouseup"):f.PointerEvent?(g.downEvent="pointerdown",g.moveEvent="pointermove",g.upEvent="pointerup"):(g.downEvent="mousedown",g.moveEvent="mousemove",
g.upEvent="mouseup");return g};c.getUrlParameter=function(g){var u={};f.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,B,H){u[B]=H});return g?u[g]:u};f.HAPUtils=c})(window);
(function(f,c){f.HAPPlaylistManager=function(g){function u(){A=HAPUtils.randomiseArray(L);console.log(A)}var t=this,B=g.loop,H=g.random,L,ka=!1,C=-1,ca,U,N=!1,A=[],ha=!1;this.setCounter=function(I,Y){"undefined"===typeof Y&&(Y=!0);C=Y?C+parseInt(I,10):parseInt(I,10);if(isNaN(C))alert("HAPPlaylistManager message: No active media, counter = "+C);else if(ka=!1,"playlist"==B||"single"==B){if(H)if(C>L-1){C=A[L-1];u();if(A[0]==C){var da=A.splice(0,1);A.push(da)}C=0}else 0>C&&(C=A[0],u(),A[L-1]==C&&(da=
A.splice(L-1,1),A.unshift(da)),C=L-1);else C>L-1?C=0:0>C&&(C=L-1);c(t).trigger("HAPPlaylistManager.COUNTER_READY",t.getCounter())}else"off"==B&&(C>L-1?(C=L-1,ka=!0):0>C&&(C=0,ka=!0),ka?c(t).trigger("HAPPlaylistManager.PLAYLIST_END"):c(t).trigger("HAPPlaylistManager.COUNTER_READY",t.getCounter()))};this.getCounter=function(){return H?ha?C:A[C]:C};this.advanceHandler=function(I){ha=!1;N?(N=!1,U+I>L-1?(C=L-1,c(t).trigger("HAPPlaylistManager.COUNTER_READY",t.getCounter())):0>U+I?(C=0,c(t).trigger("HAPPlaylistManager.COUNTER_READY",
t.getCounter())):t.setCounter(U+I,!1)):t.setCounter(I)};this.processPlaylistRequest=function(I){ha=!1;H&&(ha=!0,ca=I,N||(U=C,N=!0));t.setCounter(I,!1)};this.setPlaylistItems=function(I,Y){"undefined"===typeof Y&&(Y=!0);Y&&(C=-1);L=I;H&&u()};this.reSetCounter=function(I){"undefined"===typeof I?C=-1:(I=parseInt(I,10),L?(I>L-1?I=L-1:0>I&&(I=0),C=I):C=-1)};this.setRandom=function(I){(H=I)&&u();if(H){var Y=A.length;for(I=0;I<Y;I++)if(A[I]==C){if(0==I)break;I=A.splice(I,1);A.unshift(parseInt(I,10));break}C=
0}else N?(C=ca,N=!1):C=A[C]};this.setLooping=function(I){B=I};this.getPosition=function(I){return A.indexOf(I)}}})(window,jQuery);
(function(f,c){f.HAPPlaybackRateSlider=function(g){function u(J){if(!ca){if("touchstart"==J.type){if(J=J.originalEvent.touches,!(J&&0<J.length))return!1}else J.preventDefault();ca=!0;L.on(Ta.moveEvent,function(v){a:{if("touchmove"==v.type){if(v.originalEvent.touches&&v.originalEvent.touches.length)var T=v.originalEvent.touches;else if(v.originalEvent.changedTouches&&v.originalEvent.changedTouches.length)T=v.originalEvent.changedTouches;else break a;if(1<T.length)break a;T=T[0]}else T=v;v.preventDefault();
t(T);B(T)}}).on(Ta.upEvent,function(v){a:if(ca){ca=!1;L.off(Ta.moveEvent).off(Ta.upEvent);if("touchend"==v.type){if(v.originalEvent.touches&&v.originalEvent.touches.length)var T=v.originalEvent.touches;else if(v.originalEvent.changedTouches&&v.originalEvent.changedTouches.length)T=v.originalEvent.changedTouches;else break a;if(1<T.length)break a;T=T[0]}else T=v;v.preventDefault();t(T);A.hide()}})}return!1}function t(J){U?(J=Math.max(0,Math.min(1,(J.pageY-ha.offset().top)/da)),J=1-J):J=Math.max(0,
Math.min(1,(J.pageX-ha.offset().left)/da));H.setValue(J)}function B(J){var v=U?J.pageY-ha.offset().top:J.pageX-ha.offset().left;0>v?v=0:v>da&&(v=da);v=Math.max(0,Math.min(1,v/da));if(!HAPUtils.isNumber(v))return!1;U&&(v=1-v);v=Ua+(Ob-Ua)*v;v=Math.round(10*v)/10;A.text(v);v=C[0].getBoundingClientRect();var T=Y[0].getBoundingClientRect();if(U){var Pa=parseInt(T.left-v.left-A.outerWidth()/2+Y.outerWidth()/2);J=parseInt(J.pageY-ka.scrollTop()-v.top-A.outerHeight()-10);J<T.top-v.top-A.outerHeight()-10?
J=T.top-v.top-A.outerHeight()-10:J>T.top-v.top+Y.outerHeight()-A.outerHeight()&&(J=T.top-v.top+Y.outerHeight()-A.outerHeight())}else Pa=parseInt(J.pageX-ka.scrollLeft()-v.left-A.outerWidth()/2),J=parseInt(T.top-v.top-A.outerHeight()),Pa<T.left-v.left?Pa=T.left-v.left:Pa>T.left-v.left+Y.outerWidth()-A.outerWidth()&&(Pa=T.left-v.left+Y.outerWidth()-A.outerWidth());A.css({left:Pa+"px",top:J+"px"}).show()}var H=this,L=c(document),ka=c(f),C=g.wrapper,ca,U=g.isVertical,N=U?"height":"width",A=g.tooltip,
ha=g.sliderBg,I=g.sliderLevel,Y=g.seekbar,da=U?ha.height():ha.width(),Ta=HAPUtils.getEvents(),Ua=g.settings.playbackRateMin,Ob=g.settings.playbackRateMax;Y.on(Ta.downEvent,function(J){u(J);return!1});this.setValue=function(J){HAPUtils.isNumber(da)||(da=U?ha.height():ha.width());I.css(N,J*da+"px");J=Ua+(Ob-Ua)*J;J=Math.round(10*J)/10;c(H).trigger("HAPPlaybackRateSlider.RANGE_CHANGE",{value:J})};this.setVisual=function(J){J=(J-Ua)/(Ob-Ua);HAPUtils.isNumber(da)||(da=U?ha.height():ha.width());I.css(N,
J*da+"px")};if(!HAPUtils.isMobile()){var wb=function(){Y.off(Ta.moveEvent,B).off("mouseout",wb);L.off("mouseout",wb);A.hide()};Y.on("mouseover",function(){ca||(Y.on(Ta.moveEvent,B).on("mouseout",wb),L.on("mouseout",wb))})}}})(window,jQuery);
(function(f,c){f.HAPRangeSlider=function(g){function u(U){if(!H){if("touchstart"==U.type){if(U=U.originalEvent.touches,!(U&&0<U.length))return!1}else U.preventDefault();H=!0;B.on(L.moveEvent,function(N){a:{if("touchmove"==N.type){if(N.originalEvent.touches&&N.originalEvent.touches.length)var A=N.originalEvent.touches;else if(N.originalEvent.changedTouches&&N.originalEvent.changedTouches.length)A=N.originalEvent.changedTouches;else break a;if(1<A.length)break a;A=A[0]}else A=N;N.preventDefault();c(t).trigger("HAPRangeSlider.RANGE_CHANGE",
{point:A,elem:ca,event:A})}}).on(L.upEvent,function(N){a:if(H){H=!1;B.off(L.moveEvent).off(L.upEvent);if("touchend"==N.type){if(N.originalEvent.touches&&N.originalEvent.touches.length)var A=N.originalEvent.touches;else if(N.originalEvent.changedTouches&&N.originalEvent.changedTouches.length)A=N.originalEvent.changedTouches;else break a;if(1<A.length)break a;A=A[0]}else A=N;N.preventDefault();c(t).trigger("HAPRangeSlider.RANGE_CHANGE",{point:A,elem:ca})}})}return!1}var t=this,B=c(document);c(f);var H,
L=HAPUtils.getEvents(),ka=g.range_handle_a,C=g.range_handle_b,ca;ka.on(L.downEvent,function(U){ca=c(this).css("z-index",1);C.css("z-index",0);u(U);return!1});C.on(L.downEvent,function(U){ca=c(this).css("z-index",1);ka.css("z-index",0);u(U);return!1});this.isDrag=function(){return H}}})(window,jQuery);var hapjq=jQuery;
(function(f){f.fn.hap=function(c){function g(){S=m.mp3||m.path;-1!=S.indexOf("ebsfm:")&&(S=atob(S.substr(6)));if(vd)sa&&(b=0,c.resumeTime?b=resumeTime:m.start&&(b=m.start),qa?E.loadVideoById({videoId:S,startSeconds:b,endSeconds:m.end,suggestedQuality:m.quality}):E.cueVideoById({videoId:S,startSeconds:b,endSeconds:m.end,suggestedQuality:m.quality}));else{if(0==ia.length){alert("Using Youtube requires player to have thumbnail image in player where Youtube player will be placed. Please use demo which has thumbnail in player! hap-player-thumb element");
return}kb=f('<div class="hap-youtube-holder"/>').appendTo(ia);var a="ytplayer"+Math.floor(16777215*Math.random()),b="https:"==window.location.protocol?"https:":"http:",d=window.location.href.split("/");d=d[0]+"//"+d[2];var e="&origin="+d;b=b+"//www.youtube-nocookie.com/embed/"+S+"?enablejsapi=1&controls=0&rel=0&showinfo=0&playsinline=1&modestbranding=1&wmode=transparent&iv_load_policy=3&cc_load_policy=0";/^http/.test(d)&&(b+=e);c.resumeTime?(b+="&start="+c.resumeTime,delete c.resumeTime):m.start&&
(b+="&start="+m.start);m.end&&(b+="&end="+m.end);Xc=f("<iframe/>",{id:a,frameborder:0,src:b,width:"100%",height:"100%",webkitAllowFullScreen:!1,mozallowfullscreen:!1,allowFullScreen:!1,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}).addClass("hap-media");kb.show().prepend(Xc);window.YT||(b=document.createElement("script"),b.src="https://www.youtube.com/iframe_api",d=document.getElementsByTagName("script")[0],d.parentNode.insertBefore(b,d));var h=setInterval(function(){window.YT&&
window.YT.Player&&(h&&clearInterval(h),E=new YT.Player(a,{events:{onReady:u,onStateChange:t,onError:B}}))},100);vd=!0}kb.show()}function u(a){sa=!0;c.forceYoutubeChromeless&&Xc.addClass("hap-yt-clean");wd&&qa&&E.playVideo()}function t(a){kb.is(":visible")&&(console.log(a),-1!=a.data&&(0==a.data?lb&&Ha&&!wa&&!ic.isDrag()?(wa=!0,E.seekTo(xa),E.playVideo()):jc||(jc=!0,Yc()):1==a.data?(Zc||(jc=!1,E.setPlaybackRate(m.playbackRate),mb&&mb.setVisual(m.playbackRate),xd||(xd=f('<div class="hap-iframe-blocker"></div>').css("display",
"block").appendTo(kb)),wd=qa=Zc=!0,c.hideYoutubeAfterStart&&kb.css("opacity",0)),lb&&Ha&&setTimeout(function(){clearTimeout(this);wa=!1},1E3),ab&&clearInterval(ab),ab=setInterval(yd,zd),Ad()):2==a.data&&Bd()))}function B(a){f(q).trigger("soundError",{instance:q,instanceName:c.instanceName,media:m,error:a})}function H(){navigator.mediaSession.metadata=new MediaMetadata({title:m.title,artist:m.artist||"",album:m.album||"",artwork:[{src:m.thumb||""}]})}function L(a){var b=n[0].getBoundingClientRect(),
d=a[0].getBoundingClientRect();M.text(a.attr("data-tooltip"));var e=parseInt(d.top-b.top-M.outerHeight());a=parseInt(d.left-b.left-M.outerWidth()/2+a.outerWidth()/2);a+M.outerWidth()>n.width()?a=n.width()-M.outerWidth():0>a&&(a=0);0>e+b.top&&(e=parseInt(d.top-b.top+M.outerHeight()+15));M.css({left:a+"px",top:e+"px"}).show()}function ka(a){if(y){if(!nb){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();nb=!0;Pb.on(ob.moveEvent,function(b){a:{if("touchmove"==
b.type){if(b.originalEvent.touches&&b.originalEvent.touches.length)var d=b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)d=b.originalEvent.changedTouches;else break a;if(1<d.length)break a;d=d[0]}else d=b;b.preventDefault();C(d)}}).on(ob.upEvent,function(b){a:if(nb){nb=!1;Pb.off(ob.moveEvent).off(ob.upEvent);if("touchend"==b.type){if(b.originalEvent.touches&&b.originalEvent.touches.length)var d=b.originalEvent.touches;else if(b.originalEvent.changedTouches&&
b.originalEvent.changedTouches.length)d=b.originalEvent.changedTouches;else break a;if(1<d.length)break a;d=d[0]}else d=b;b.preventDefault();C(d,!0);M.hide()}})}return!1}}function C(a,b){if(Qb)d=kc.setProgress(a);else{d=a.pageX-Rb.offset().left;0>d?d=0:d>Z&&(d=Z);var d=Math.max(0,Math.min(1,d/Z))}if(b){if("youtube"==p)E&&sa&&E.seekTo(d*E.getDuration());else if("audio"==p&&w&&!isNaN(w.duration)){var e=w.duration;var h=d*e;h>e-2&&(h=e-2);try{w.currentTime=h}catch(k){console.log(k)}}Sb||ya.width(d*Z)}else ya.width(d*
Z)}function ca(a){if(Qb)b=kc.trackTooltip(a),d=n[0].getBoundingClientRect(),e=Ia[0].getBoundingClientRect(),h=parseInt(e.top-d.top-M.outerHeight()-20),a=parseInt(e.left-d.left-M.outerWidth()/2+Ia.outerWidth()/2),a+M.outerWidth()>n.width()?a=n.width()-M.outerWidth():0>a&&(a=0),0>h+d.top&&(h=parseInt(e.top-d.top+M.outerHeight()+20));else{b=a.pageX-Rb.offset().left;if(!HAPUtils.isNumber(b))return!1;0>b?b=0:b>Z&&(b=Z);var b=Math.max(0,Math.min(1,b/Z)),d=n[0].getBoundingClientRect(),e=Ia[0].getBoundingClientRect();
a=parseInt(a.pageX-Cd.scrollLeft()-d.left-M.outerWidth()/2);var h=parseInt(e.top-d.top-M.outerHeight(),10)-10;a<e.left-d.left?a=e.left-d.left:a>e.left-d.left+Ia.outerWidth()-M.outerWidth()&&(a=e.left-d.left+Ia.outerWidth()-M.outerWidth());0>h+d.top&&(h=parseInt(e.top-d.top+M.outerHeight()+15))}M.css({left:a+"px",top:h+"px"});if(!HAPUtils.isNumber(b))return!1;if("youtube"==p){if(E&&sa){var k=E.getDuration();h=b*k}}else"audio"==p&&w&&(k=w.duration,h=b*k);HAPUtils.isNumber(k)&&HAPUtils.isNumber(k)&&
M.html(HAPUtils.formatTime(h)+" / "+HAPUtils.formatTime(k)).show()}function U(){za=new HAPVolumeSlider({volume:xb,container:n,tooltip:M});f(za).on("HAPVolumeSlider.VOLUME_CHANGE",function(a,b){"youtube"==p?E&&sa&&E.setVolume(100*b):w&&(w.volume=b,w.muted=0==b?!0:!1)})}function N(a){a=Math.max(0,Math.min(1,a/Z));if("youtube"==p)var b=E.getDuration();else"audio"==p&&(b=w.duration);return a*b}function A(a){if(!y||c.disableSongSkip||K&&K.isAdOn())return!1;a=f(a.currentTarget);qa=$c=!0;Tb();Ub&&m.adMid&&
!Vb&&K.forceAdMidAudio();if(pb){var b=a.closest(".hap-accordion-item").attr("data-id");if(b!=Wb){Wb=b;R=Xb[Wb].data;z=R.length;for(b=0;b<z;b++)R[b].id=b;O.setPlaylistItems(z)}}a=a.closest(".hap-playlist-item").attr("data-id");O.processPlaylistRequest(a);-1<ea.indexOf("hap-art-narrow-light")&&q.togglePlaylist();f(q).trigger("clickPlaylistItem",{instance:q,instanceName:c.instanceName})}function ha(a){a.preventDefault();if(!y)return!1;f(a.currentTarget).closest(".hap-playlist-item").addClass("hap-playlist-item-selected");
f(q).trigger("overPlaylistItem",{instance:q,instanceName:c.instanceName})}function I(a){a.preventDefault();if(!y)return!1;a=f(a.currentTarget).closest(".hap-playlist-item");a.hasClass("hap-playlist-item-disabled")||a.removeClass("hap-playlist-item-selected");f(q).trigger("outPlaylistItem",{instance:q,instanceName:c.instanceName})}function Y(a){if(!y)return!1;a=f(a.currentTarget);if(a.hasClass("hap-playlist-toggle")||a.hasClass("hap-playlist-close"))q.togglePlaylist();else if(a.hasClass("hap-skip-backward"))a=
a.attr("data-skip-time")?parseInt(a.attr("data-skip-time"),10):seekTime,q.seekBackward(a);else if(a.hasClass("hap-skip-forward"))a=a.attr("data-skip-time")?parseInt(a.attr("data-skip-time"),10):seekTime,q.seekForward(a);else if(a.hasClass("hap-prev-toggle")){Ub&&m.adMid&&!Vb&&K.forceAdMidAudio();if(c.disableSongSkip||K&&K.isAdOn())return!1;q.previousMedia()}else if(a.hasClass("hap-playback-toggle"))Ub&&m.adMid&&!Vb&&K.forceAdMidAudio(),q.togglePlayback();else if(a.hasClass("hap-next-toggle")){Ub&&
m.adMid&&!Vb&&K.forceAdMidAudio();if(c.disableSongSkip||K&&K.isAdOn())return!1;q.nextMedia()}else if(a.hasClass("hap-range-toggle"))q.toggleRange();else if(a.hasClass("hap-playback-rate-toggle")||a.hasClass("hap-playback-rate-close"))ad.hide(),bd.toggle(),M.hide(),bd.is(":visible")?lc.addClass("hap-contr-btn-hover"):lc.removeClass("hap-contr-btn-hover"),mc.removeClass("hap-contr-btn-hover");else if(a.hasClass("hap-loop-toggle"))qb.find(".hap-btn").hide(),rb++,rb>Yb.length-1&&(rb=0),c.loopState=Yb[rb],
qb.find(".hap-btn-loop-"+c.loopState).show(),O.setLooping(c.loopState),L(qb.find(".hap-btn:visible"));else if(a.hasClass("hap-random-toggle"))c.randomPlay=!c.randomPlay,O.setRandom(c.randomPlay),Qa.find(".hap-btn").hide(),c.randomPlay?Qa.find(".hap-btn-random-on").show():Qa.find(".hap-btn-random-off").show(),L(Qa.find(".hap-btn:visible"));else if(a.hasClass("hap-sort-alpha"))HAPUtils.isEmpty(Aa)?Aa="title-asc":"title-asc"==Aa?Aa="title-desc":"title-desc"==Aa&&(Aa="title-asc"),q.sort(Aa),L(Va.find(".hap-btn:visible"));
else if(a.hasClass("hap-popup-toggle")){if(c.isPopup)return!1;hapOpenPopup(c,q)}else if(a.hasClass("hap-share-toggle")||a.hasClass("hap-share-close"))ad.toggle(),bd.hide(),M.hide(),lc.removeClass("hap-contr-btn-hover"),ad.is(":visible")?mc.addClass("hap-contr-btn-hover"):mc.removeClass("hap-contr-btn-hover");else if(a.hasClass("hap-share-item")){if(!p)return!1;"undefined"===typeof HAPShareManager&&alert("link to sharemanager.js file missing in head tag!");Dd.share(a.attr("data-type").toLowerCase(),
m,q.getCurrentMediaUrl())}}function da(){ja&&(f(q).trigger("playlistItemEnabled",{instance:q,instanceName:c.instanceName,item:ja}),ja.removeClass("hap-playlist-item-selected hap-playlist-item-disabled"),ja=null)}function Ta(a){ja&&da();ja=x.children(".hap-playlist-item").eq(a);if(ja.length){ja.addClass("hap-playlist-item-selected hap-playlist-item-disabled");if(c.usePlaylistScroll&&0<z){if(!$c)if("undefined"!==typeof mCustomScrollbar)setTimeout(function(){"horizontal"==c.playlistScrollOrientation?
Wa.mCustomScrollbar("scrollTo",parseInt(ja.position().left),{scrollInertia:500}):Wa.mCustomScrollbar("scrollTo",parseInt(ja.position().top),{scrollInertia:500})},1E3);else var b=setInterval(function(){"undefined"!==typeof mCustomScrollbar&&(clearInterval(b),"horizontal"==c.playlistScrollOrientation?Wa.mCustomScrollbar("scrollTo",parseInt(ja.position().left),{scrollInertia:500}):Wa.mCustomScrollbar("scrollTo",parseInt(ja.position().top),{scrollInertia:500}))},100);$c=!1}f(q).trigger("playlistItemDisabled",
{instance:q,instanceName:c.instanceName,item:ja})}}function Ua(a){ba=!0;ta.show();sb&&nc();var b=cd.length?cd.find(a):f(a);if(0==b.length)return alert("Failed playlist selection! Playlist - "+a+" does not exist. Check activePlaylist option in settings!"),ba=!1,ta.hide(),!1;Ja=void 0!=b.attr("data-playlist-id")?b.attr("data-playlist-id"):null;c.activePlaylist=a;f(q).trigger("playlistStartLoad",{instance:q,instanceName:c.instanceName});b.find(".hap-playlist-options").length&&(D=b.find(".hap-playlist-options").clone().prependTo(x),
bb=parseInt(D.attr("data-add-more-limit"),10),yb=parseInt(D.attr("data-add-more-num-results"),10),cb=parseInt(D.attr("data-add-more-offset"),10),oc=D.attr("data-add-more-sort-order"),pc=D.attr("data-add-more-sort-direction"),qc=D.attr("data-encrypt-media-paths"),void 0!=D.attr("data-taxonomy")&&(rc=D.attr("data-taxonomy")),void 0!=D.attr("data-category")&&(sc=D.attr("data-category")),void 0!=D.attr("data-tag")&&(tc=D.attr("data-tag")),void 0!=D.attr("data-match")&&(uc=D.attr("data-match")),void 0==
D.attr("data-thumb-global")||HAPUtils.isEmpty(D.attr("data-thumb-global"))||(Zb=D.attr("data-thumb-global")),void 0==D.attr("data-start")||HAPUtils.isEmpty(D.attr("data-start"))||(vc=Number(D.attr("data-start"))),void 0==D.attr("data-end")||HAPUtils.isEmpty(D.attr("data-end"))||(wc=Number(D.attr("data-end"))),void 0==D.attr("data-playback-rate")||HAPUtils.isEmpty(D.attr("data-playback-rate"))||(a=Number(D.attr("data-playback-rate")),zb=HAPUtils.valueLimit(a,c.playbackRateMin,c.playbackRateMax)),void 0!=
D.attr("data-add-more-on-total-scroll")&&(Xa=!0),void 0!=D.attr("data-media-prefix-url")&&(Ra=D.attr("data-media-prefix-url")),void 0!=D.attr("data-ad-pre")&&(Ab=D.attr("data-ad-pre").split(",").map(function(d){return d.trim()}),void 0!=D.attr("data-shuffle-ads")&&1<Ab.length&&HAPUtils.shuffleArray(Ab)),void 0!=D.attr("data-ad-mid")&&(Bb=D.attr("data-ad-mid").split(",").map(function(d){return d.trim()}),void 0!=D.attr("data-shuffle-ads")&&1<Bb.length&&HAPUtils.shuffleArray(Bb),void 0!=D.attr("data-ad-mid-interval")&&
(xc=D.attr("data-ad-mid-interval"))),void 0!=D.attr("data-ad-end")&&(Cb=D.attr("data-ad-end").split(",").map(function(d){return d.trim()}),void 0!=D.attr("data-shuffle-ads")&&1<Cb.length&&HAPUtils.shuffleArray(Cb)));b.children(".hap-playlist-item").each(function(){aa.push(T(f(this)))});z=aa.length;v()}function Ob(a){console.log(a);f.ajax({type:"GET",url:a.path,dataType:"html"}).done(function(b){var d={};f(b).children(".hap-playlist-item").each(function(){d=T(f(this));a.origtype&&(d.origtype=a.origtype);
void 0!=a.mediaId&&(d.mediaId=a.mediaId);aa.push(d)});z=aa.length;v()}).fail(function(b,d,e){console.log("Error processXml: "+b,d,e);v()})}function wb(a){if("file:"==window.location.protocol)return console.log("Reading m3u files requires server connection."),!1;f.ajax({type:"GET",url:a.path}).done(function(b){var d,e;b.replace("#EXTM3U","").split("#EXTINF:").slice(1).map(function(h,k){d=f.extend(!0,{},a);d.type="audio";e=h.split("\n").slice(0,-1);d.mp3=f.trim(e[1]);var l=e[0].split(",");if(1<l.length){var G=
l[0];HAPUtils.isNumber(G)&&-1!=G&&(d.duration=G);l=l[1]}else l=l[0];-1<l.indexOf("-")?(l=l.split("-"),d.title=f.trim(l[1]),l[0].match(/^\d+(\s*)+\./)?(l=l[0].substr(l[0].indexOf(".")+1),d.artist=f.trim(l[1])):d.artist=f.trim(l[0])):d.title=f.trim(l);P.push(d)});v()}).fail(function(b,d,e){console.log("Error process m3u: "+b,d,e);v()})}function J(a){f.ajax({type:"GET",url:a.path,dataType:"json"}).done(function(b){db=-1;P=[];aa=[];sb=x;Array.isArray(b)?aa=b:aa.push(b);if(a.origtype&&void 0!=a.mediaId){var d=
aa.length;for(b=0;b<d;b++)aa[b].origtype=a.origtype,aa[b].mediaId=a.mediaId}z=aa.length;v()}).fail(function(b,d,e){console.log("Error processJson: "+b,d,e);v()})}function v(){db++;if(db>z-1)Ka();else{var a=aa[db],b=a.type;if("soundcloud"==b)if(ma="soundcloud",a.limit?(la=a.limit,a.loadMore&&(ua=!0)):(la=999999999,ua=!1),Ba=[],window.SC)Db(!0,a.path);else{Ed();var d=setInterval(function(){dd&&(d&&clearInterval(d),Db(!0,a.path))},100)}else"podcast"==b?(ma="podcast",Fd(a)):"itunes_podcast_music"==b?
he(a):"folder"==b?(ma="folder",ie(a)):"folder_accordion"==b?(pb=!0,je(a)):"json_accordion"==b?(pb=!0,ke(a)):"gdrive_folder"==b?le(a):"hls"==b?(P.push(a),v()):"audio"==b?(P.push(a),v()):"shoutcast"==b||"icecast"==b||"radiojar"==b?(P.push(a),v()):"youtube_single"==b||"youtube_playlist"==b?a.noApi?(P.push(a),v()):(ma="youtube",a.loadMore&&(ua=!0),eb||Pa("youtube"),eb.setData(a)):"xml"==b?Ob(a):"json"==b?J(a):"m3u"==b&&wb(a)}}function T(a){var b={};b.type=b.origtype=a.attr("data-type");b.origclasses=
a.attr("class");a.is(":empty")||(b.content=a.html());void 0!=a.attr("data-noapi")&&(b.noApi=!0);void 0!=a.attr("data-category")&&(b.category=a.attr("data-category"));void 0!=a.attr("data-tag")&&(b.tag=a.attr("data-tag"));void 0!=a.attr("data-media-id")&&(b.mediaId=parseInt(a.attr("data-media-id"),10));void 0!=a.attr("data-audio-preview")&&(b.audioPreview=a.attr("data-audio-preview"));void 0!=a.attr("data-mp3")&&(b.mp3=a.attr("data-mp3"));void 0!=a.attr("data-wav")&&(b.wav=a.attr("data-wav"));void 0!=
a.attr("data-aac")&&(b.aac=a.attr("data-aac"));void 0!=a.attr("data-flac")&&(b.flac=a.attr("data-flac"));void 0!=a.attr("data-path")&&(b.path=a.attr("data-path"),-1!=b.path.indexOf("ebsfm:")&&(b.path=atob(b.path.substr(6))));void 0!=a.attr("data-mountpoint")&&(b.mountpoint=a.attr("data-mountpoint"));void 0!=a.attr("data-version")&&(b.version=a.attr("data-version"));void 0!=a.attr("data-sid")&&(b.sid=a.attr("data-sid"));void 0!=a.attr("data-limit")&&(b.limit=Math.abs(parseInt(a.attr("data-limit"),
10)));Zb?b.thumb=Zb:void 0!=a.attr("data-thumb")&&(b.thumb=a.attr("data-thumb"));void 0!=a.attr("data-thumb-default")&&(b.thumbDefault=a.attr("data-thumb-default"));void 0!=a.attr("data-alt")&&(b.alt=a.attr("data-alt"));void 0!=a.attr("data-title")&&(b.title=a.attr("data-title"));void 0!=a.attr("data-description")&&(b.description=a.attr("data-description"));void 0!=a.attr("data-artist")&&(b.artist=a.attr("data-artist"));void 0!=a.attr("data-album")&&(b.album=a.attr("data-album"));void 0!=a.attr("data-download")&&
(b.download=a.attr("data-download"));void 0!=a.attr("data-duration")&&(b.duration=a.attr("data-duration"));void 0!=a.attr("data-date")&&(b.date=a.attr("data-date"));void 0!=a.attr("data-id3")&&(b.id3=!0);vc?b.start=vc:void 0!=a.attr("data-start")&&(b.start=Math.abs(a.attr("data-start")));wc?b.end=wc:void 0!=a.attr("data-end")&&(b.end=Math.abs(a.attr("data-end")));if(zb)b.playbackRate=zb;else if(void 0!=a.attr("data-playback-rate")&&!HAPUtils.isEmpty(a.attr("data-playback-rate"))){var d=Number(a.attr("data-playback-rate"));
b.playbackRate=HAPUtils.valueLimit(d,c.playbackRateMin,c.playbackRateMax)}void 0!=a.attr("data-link")&&(b.link=a.attr("data-link"),b.target="_blank",void 0!=a.attr("data-target")&&(b.target=a.attr("data-target")));void 0!=a.attr("data-share")&&(b.share=a.attr("data-share"));void 0!=a.attr("data-sort")&&(b.sort=a.attr("data-sort"));void 0!=a.attr("data-active-accordion")&&(b.activeAccordion=a.attr("data-active-accordion"));a.html().length&&(b.customContent=a.html());void 0!=a.attr("data-load-more")&&
(ua=!0);void 0!=a.attr("data-use-gd-api")&&(b.useGdApi=!0);void 0!=a.attr("data-ad-pre")?(b.adPre=a.attr("data-ad-pre").split(",").map(function(e){return e.trim()}),void 0!=a.attr("data-shuffle-ads")&&1<b.adPre.length&&HAPUtils.shuffleArray(b.adPre)):Ab&&(b.adPre=Ab);void 0!=a.attr("data-ad-mid")?(b.adMid=a.attr("data-ad-mid").split(",").map(function(e){return e.trim()}),void 0!=a.attr("data-shuffle-ads")&&1<b.adMid.length&&HAPUtils.shuffleArray(b.adMid),void 0!=a.attr("data-ad-mid-interval")&&(b.adMidInterval=
a.attr("data-ad-mid-interval"))):Bb&&(b.adMid=Bb,xc&&(b.adMidInterval=xc));void 0!=a.attr("data-ad-end")?(b.adEnd=a.attr("data-ad-end").split(",").map(function(e){return e.trim()}),void 0!=a.attr("data-shuffle-ads")&&1<b.adEnd.length&&HAPUtils.shuffleArray(b.adEnd)):Cb&&(b.adEnd=Cb);return b}function Pa(a){"youtube"==a&&(eb=new HAPYoutubeLoader(c),f(eb).on("HAPYoutubeLoader.END_LOAD",function(b,d){var e,h=d.data.length;for(e=0;e<h;e++){var k=d.data[e];P.push(k)}V=d.nextPageToken;na?Ka():v()}))}function ie(a){if("file:"==
window.location.protocol)return console.log("Reading folders requires server connection."),!1;a.limit?(la=a.limit,a.loadMore&&(ua=!0)):la=999999999;var b=a.path.replace(/\/\//g,"/"),d=c.sourcePath+"includes/folder_parser.php";b={dir:b};var e=la;V=[];a.id3?(Ya=oa=P.length-1,ed=!0):ed=!1;f.ajax({type:"GET",url:d,data:b,dataType:"json"}).done(function(h){var k,l=h.length;a.sort&&("filename-asc"==a.sort?HAPUtils.keysrt(h,"filename"):"filename-desc"==a.sort?HAPUtils.keysrt(h,"filename",!0):"date-asc"==
a.sort?HAPUtils.keysrt(h,"filemtime"):"date-desc"==a.sort&&HAPUtils.keysrt(h,"filemtime",!0));for(k=0;k<l;k++){var G=h[k];var F=f.extend(!0,{},a);F.type="audio";if(c.WP_CONTENT_URL){var Q=c.WP_CONTENT_URL.split("/");Q=Q[Q.length-1];Q=G.dirname.indexOf(Q)+Q.length;Q=c.WP_CONTENT_URL+"/"+G.dirname.substr(Q)+"/"+G.basename}else Q=G.fullpath;F[G.extension]=Q;c.createDownloadIconsInPlaylist&&!F.download&&(F.download=Q);c.createLinkIconsInPlaylist&&!F.link&&(F.link=Q);F.title||(F.title=G.filename);k<e?
(P.push(F),oa++):V.push(F)}0==V.length&&(ua=!1,V=null);a.id3?("undefined"===typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),yc()):v()}).fail(function(h,k,l){console.log("Error processFolder: "+h.responseText,k,l);v()})}function je(a){if("file:"==window.location.protocol)return console.log("Reading folders requires server connection."),!1;var b=a.path.replace(/\/\//g,"/");f.ajax({type:"GET",url:c.sourcePath+"includes/folder_accordion.php",data:{dir:b},dataType:"json"}).done(function(d){var e,
h=d.length,k;for(e=0;e<h;e++){var l=d[e].children;Xb.push({media:l});var G=l.length;for(k=0;k<G;k++){var F=l[k];var Q={type:"audio"};void 0!=a.mediaId&&(Q.mediaId=a.mediaId);if(c.WP_CONTENT_URL){var W=c.WP_CONTENT_URL.split("/");W=W[W.length-1];W=F.dirname.indexOf(W)+W.length;W=c.WP_CONTENT_URL+"/"+F.dirname.substr(W)+"/"+F.basename}else W=F.fullpath;Q[F.extension]=W;c.createDownloadIconsInPlaylist&&!Q.download&&(Q.download=W);c.createLinkIconsInPlaylist&&!Q.link&&(Q.link=W);Q.title||(Q.title=F.filename);
l[k]=Q}}Gd(d,a);ra||(ra=0);Wb=ra;x=zc=x.find('.hap-accordion-item[data-id="'+ra+'"]').addClass("hap-accordion-item-inited hap-accordion-item-opened").find(".hap-accordion-item-content");P=d[ra].children;a.id3?(fd=!0,"undefined"===typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),Ya=-1,oa=P.length-1,$b()):Ka()}).fail(function(d,e,h){console.log("Error processFolderAccordion: "+d,e,h);v()})}function ke(a){if("file:"==window.location.protocol)return console.log("Reading json requires server connection."),
!1;f.ajax({type:"GET",url:a.path,dataType:"json"}).done(function(b){var d,e=b.length,h;for(d=0;d<e;d++){var k=b[d].children;Xb.push({media:k});a.sort&&("filename-asc"==a.sort?HAPUtils.keysrt(k,"filename"):"filename-desc"==a.sort?HAPUtils.keysrt(k,"filename",!0):"date-asc"==a.sort?HAPUtils.keysrt(k,"filemtime"):"date-desc"==a.sort&&HAPUtils.keysrt(k,"filemtime",!0));var l=k.length;for(h=0;h<l;h++){var G=k[h];var F={type:"audio"};void 0!=a.mediaId&&(F.mediaId=a.mediaId);G=Ra?Ra+"/"+b[d].parent+"/"+
G:G;F.mp3=G;c.createDownloadIconsInPlaylist&&!F.download&&(F.download=G);c.createLinkIconsInPlaylist&&!F.link&&(F.link=G);k[h]=F}}Gd(b,a);ra||(ra=0);Wb=ra;x=zc=x.find('.hap-accordion-item[data-id="'+ra+'"]').addClass("hap-accordion-item-inited hap-accordion-item-opened").find(".hap-accordion-item-content");P=b[ra].children;a.id3?(fd=!0,"undefined"===typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),Ya=-1,oa=P.length-1,$b()):Ka()}).fail(function(b,d,e){console.log("Error processJsonAccordion: "+
b,d,e);v()})}function le(a){if("file:"==window.location.protocol)return console.log("Reading files from folders locally is not possible! This requires server connection."),!1;if(HAPUtils.isEmpty(c.gDriveAppId))return console.log("gDriveAppId has not been set in settings!"),!1;f.ajax({url:"https://www.googleapis.com/drive/v3/files?q='"+a.path+"'+in+parents&pageSize=1000&key="+c.gDriveAppId,dataType:"jsonp"}).done(function(b){var d,e=b.files.length,h=[],k=[];for(d=0;d<e;d++){var l=b.files[d];/mp3|mpeg|mpeg3|wav|aac|adts/.test(l.mimeType)?
k.push(l):/jpg|jpeg|png/.test(l.mimeType)&&h.push(l)}a.sort&&("filename-asc"==a.sort?(HAPUtils.keysrt(k,"name"),HAPUtils.keysrt(h,"name")):"filename-desc"==a.sort&&(HAPUtils.keysrt(k,"name",!0),HAPUtils.keysrt(h,"name",!0)));e=k.length;for(d=0;d<e;d++){l=k[d];b=f.extend(!0,{},a);b.type="audio";var G=l.name.substr(l.name.lastIndexOf(".")+1);a.useGdApi?(b[G.toLowerCase()]="https://www.googleapis.com/drive/v3/files/"+l.id+"?alt=media&key="+c.gDriveAppId,c.createDownloadIconsInPlaylist&&!b.download&&
(b.download="https://www.googleapis.com/drive/v3/files/"+l.id+"?alt=media&key="+c.gDriveAppId)):(b[G.toLowerCase()]="https://drive.google.com/uc?export=view&id="+l.id,c.createDownloadIconsInPlaylist&&!b.download&&(b.download="https://drive.google.com/uc?export=download&id="+l.id));c.createLinkIconsInPlaylist&&!b.link&&(b.link="https://drive.google.com/open?id="+l.id);!b.thumb&&h[d]&&(b.thumb="https://drive.google.com/uc?export=view&id="+h[d].id);b.title||(b.title=l.name.substr(0,l.name.lastIndexOf(".")));
P.push(b)}v()}).fail(function(b,d,e){console.log("Error processGdriveFolder: "+b,d,e);v()})}function Hd(){if(!V)return!1;ba=!0;ta.show();P=V.splice(0,la);0==V.length&&(V=null);ed?(Ya=-1,oa=P.length-1,yc()):Ka()}function yc(){var a=P[oa];jsmediatags.read(a.mp3||a.wav||a.aac,{onSuccess:function(b){b=b.tags;var d=b.picture;b.artist&&(a.artist=b.artist);b.title&&(a.title=b.title);b.album&&(a.album=b.album);if(c.getId3Image&&d){var e="",h,k=d.data.length;for(h=0;h<k;h++)e+=String.fromCharCode(d.data[h]);
a.thumb="data:"+d.format+";base64,"+window.btoa(e);a.thumbIsBase64=!0}b.TLEN&&(a.duration=b.TLEN.data/1E3);oa--;oa>Ya?yc():na?Ka():v()},onError:function(b){console.log("ID3 error: ",b.type,b.info);oa--;oa>Ya?yc():v()}})}function $b(){var a=P[oa];jsmediatags.read(a.mp3||a.wav||a.aac,{onSuccess:function(b){b=b.tags;var d=b.picture;b.artist&&(a.artist=b.artist);b.title&&(a.title=b.title);b.album&&(a.album=b.album);if(c.getId3Image&&d){var e="",h,k=d.data.length;for(h=0;h<k;h++)e+=String.fromCharCode(d.data[h]);
a.thumb="data:"+d.format+";base64,"+window.btoa(e);a.thumbIsBase64=!0}b.TLEN&&(a.duration=b.TLEN.data/1E3);oa--;oa>Ya?$b():Ka()},onError:function(b){console.log("ID3 error: ",b.type,b.info);oa--;oa>Ya?$b():Ka()}})}function Fd(a){if("file:"==window.location.protocol)console.log("Using Podcast requires server connection!");else{a.limit?(la=a.limit,a.loadMore&&(ua=!0)):la=999999999;var b=me+"?url="+encodeURIComponent(a.path),d=la;V=[];f.ajax({url:b,dataType:"json",cache:!1}).done(function(e){e=e.contents.substr(e.contents.indexOf("<?xml"));
var h=HAPUtils.parseXML(e),k,l,G,F=0;f(h).find("image").length&&f(h).find("image").attr("href")?G=f(h).find("image").attr("href"):f(e).find("itunes\\:image").length&&f(e).find("itunes\\:image").attr("href")&&(G=f(e).find("itunes\\:image").attr("href"));G&&G.lastIndexOf("&size=Large")&&(G=G.replace("=Large","=Small"));f(h).find("item").each(function(){k=f(this);l=f.extend(!0,{},a);l.type="audio";l.mp3=k.find("enclosure").attr("url");!l.title&&k.find("title").length&&(l.title=k.find("title").text());
l.artist||(k.find("author").length?l.artist=k.find("author").text():k.find("itunes\\:author").length&&(l.artist=k.find("itunes\\:author").text()));k.find("pubDate").length&&(l.date=k.find("pubDate").text());if(!l.description&&k.find("description").length){var Q=k.find("description").text(),W=document.createElement("div");W.innerHTML=Q;l.description=W.textContent||W.innerText||""}l.duration||(k.find("itunes\\:duration").length?l.duration=k.find("itunes\\:duration").text():k.find("duration").length&&
(l.duration=k.find("duration").text()));l.thumb||(k.find("image").length&&k.find("image").attr("href")?l.thumb=k.find("image").attr("href"):k.find("itunes\\:image").length&&k.find("itunes\\:image").attr("href")?l.thumb=k.find("itunes\\:image").attr("href"):G&&(l.thumb=G));l.thumb.lastIndexOf("&size=Large")&&(l.thumb=l.thumb.replace("=Large","=Small"));c.createDownloadIconsInPlaylist&&!l.download&&(l.download=l.mp3);k.find("link").length&&!l.link&&c.createLinkIconsInPlaylist&&(l.link=k.find("link").text());
F<d?P.push(l):V.push(l);F++});v()}).fail(function(e,h,k){console.log("Error processPodcast: "+e.responseText,h,k);v()})}}function he(a){if("file:"==window.location.protocol)console.log("Using Podcast requires server connection!");else{var b=a.path.match(/id(\d+)/);(b=b?b[1]:url.match(/\d+/))?f.ajax({url:"https://itunes.apple.com/lookup",data:{id:parseInt(b),entity:"podcast"},type:"GET",dataType:"jsonp"}).done(function(d){a.path=d.results[0].feedUrl;Fd(a)}).fail(function(d,e,h){console.log("Error processiTunes: "+
d.responseText,e,h);v()}):(console.log("No Podcast ID found!"),v())}}function Ed(){if("file:"==window.location.protocol)console.log("Using SoundCloud requires server connection!");else{if(HAPUtils.isEmpty(c.soundCloudAppId))return console.log("soundCloudAppId has not been set in settings!"),!1;var a=document.createElement("script");a.src="https://connect.soundcloud.com/sdk.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);var d=setInterval(function(){window.SC&&(d&&
clearInterval(d),SC.initialize({client_id:c.soundCloudAppId}),dd=!0)},100)}}function Db(a,b){SC.get(a?"https://api.soundcloud.com/resolve.json?url="+b+"&client_id="+c.soundCloudAppId:b,{limit:la,linked_partitioning:1},function(d,e){if(e){for(console.log("Error getSoundCloudPage: "+e);Ba.length;)P.push(Ba.splice(0,1)[0]);v()}else{if("track"==d.kind)Ac(d);else if("playlist"==d.kind){var h,k=d.tracks.length;if(Ba.length+k>=la){k=la-Ba.length;var l=!0}for(h=0;h<k;h++)Ac(d.tracks[h])}else if(d.collection)for(k=
d.collection.length,Ba.length+k>=la&&(k=la-Ba.length,l=!0),h=0;h<k;h++)Ac(d.collection[h]);else{if(d.username){h=d.uri;h=/likes/.test(b)?h+"/likes":/favorites/.test(b)?h+"/favorites":h+"/tracks";Db(!1,h);return}if(f.isArray(d))for(k=d.length,Ba.length+k>=la&&(k=la-Ba.length,l=!0),h=0;h<k;h++)Ac(d[h])}V=d.next_href?d.next_href:null;if(d.next_href&&!l)Db(!1,d.next_href);else{for(;Ba.length;)P.push(Ba.splice(0,1)[0]);v()}}})}function Id(){if(!V)return!1;ba=!0;ta.show();P=[];P=V.splice(0,la);0==V.length&&
(V=null);Ka()}function Jd(){if(!V)return!1;ba=!0;ta.show();db=0;aa=[];z=1;if(window.SC)Db(!1,V);else{Ed();var a=setInterval(function(){dd&&(a&&clearInterval(a),Db(!1,V))},100)}}function Ac(a){if(a.streamable&&a.stream_url){var b=f.extend(!0,{},aa[db]);b.type="audio";a.duration&&(b.duration=a.duration/1E3);b.mp3=a.stream_url+"?client_id="+c.soundCloudAppId;c.createDownloadIconsInPlaylist&&!b.download&&a.downloadable&&a.download_url&&(b.download=b.mp3.replace(/\/stream\\?/,"/download"));!b.title&&a.title&&
(b.title=a.title);!b.description&&a.description&&(b.description=a.description);!b.thumb&&a.artwork_url&&(b.thumb=a.artwork_url);a.created_at&&(b.date=a.created_at);b.favoritingsCount=parseInt(a.favoritings_count?a.favoritings_count:0,10);b.playbackCount=parseInt(a.playback_count?a.playback_count:0,10);b.hotness=b.favoritingsCount+b.playbackCount;a.permalink_url&&c.createLinkIconsInPlaylist&&!b.link&&(b.link=a.permalink_url);Ba.push(b)}}function Ka(){var a,b=fb?La:R.length,d=P.length,e,h,k,l,G=0,F=
[],Q;gd=[];for(a=0;a<d;a++){var W=a+b;fb&&G++;var r=Bc?P[a].data:P[a];var Cc=r.type;if(c.usePlaylist){var X=l=k=h=Q=null;if(-1!=fa.indexOf("thumb")&&(e=r.thumb||r.thumbDefault)){"soundcloud"==r.origtype&&c.soundCloudThumbQualityInPlaylist&&(e=e.replace("large.jpg",c.soundCloudThumbQualityInPlaylist));!Ra||r.thumbIsBase64||HAPUtils.relativePath(e)||(e=Ra+e);var Ca=r.alt?r.alt:r.title?r.title.replace(/"/g,"'"):"image";h='<img class="hap-thumbimg" src="'+e+'" alt="'+Ca+'"/>'}-1!=fa.indexOf("description")&&
r.description&&(k=r.description,c.limitDescriptionText&&(k=k.substr(0,c.limitDescriptionText)+"..."));-1!=fa.indexOf("duration")&&r.duration&&(l=isNaN(r.duration)?-1==r.duration.lastIndexOf(":")?HAPUtils.formatTime(r.duration):r.duration:HAPUtils.formatTime(r.duration));-1!=fa.indexOf("date")&&r.date&&(X=(new Date(r.date)).toDateString().slice(4,10));if(c.playlistItemMarkup)e=c.playlistItemMarkup,-1!=fa.indexOf("thumb")&&h&&(h||(h=""),e=e.replace("__THUMB__",h)),-1!=fa.indexOf("title")&&(Ca=r.title?
r.title:"",e=e.replace("__TITLE__",Ca),e=e.replace("__SEPARATOR__",c.artistTitleSeparator),Ca=r.artist?r.artist:"",e=e.replace("__ARTIST__",Ca)),-1!=fa.indexOf("description")&&(k||(k=""),e=e.replace("__DESCRIPTION__",k)),-1!=fa.indexOf("duration")&&(l||(l=""),e=e.replace("__DURATION__",l)),-1!=fa.indexOf("date")&&(X||(X=""),e=e.replace("__DATE__",X)),e=f(e),Ca=e.find(".hap-playlist-item-content");else{r.origclasses||(r.origclasses="hap-playlist-item");e=f('<div class="'+r.origclasses+'"/>');delete r.origclasses;
Ca=f('<div class="hap-playlist-item-content"/>').appendTo(e);-1!=fa.indexOf("thumb")&&h&&f('<span class="hap-playlist-thumb">'+h+"</span>").appendTo(Ca);if(-1!=fa.indexOf("title")||-1!=fa.indexOf("description")&&r.description){h=f('<span class="hap-playlist-info">').appendTo(Ca);if(-1!=fa.indexOf("title")&&r.title){var gb='<span class="hap-playlist-title-wrap">';c.useNumbersInPlaylist&&(gb+='<span class="hap-playlist-title-num"></span>');r.artist&&r.title?gb="title"==ne[0]?gb+('<span class="hap-playlist-title">'+
r.title+"</span>"+c.artistTitleSeparator+'<span class="hap-playlist-artist">'+r.artist+"</span>"):gb+('<span class="hap-playlist-artist">'+r.artist+"</span>"+c.artistTitleSeparator+'<span class="hap-playlist-title">'+r.title+"</span>"):r.title?gb+='<span class="hap-playlist-title">'+r.title+"</span>":r.artist&&(gb+='<span class="hap-playlist-artist">'+r.artist+"</span>");gb+="</span>";h.append(gb)}-1!=fa.indexOf("description")&&k&&f('<span class="hap-playlist-description">'+k+"</span>").appendTo(h)}if(-1!=
fa.indexOf("duration")&&r.duration||-1!=fa.indexOf("date")&&r.date)k=f('<span class="hap-playlist-info2">').appendTo(Ca),-1!=fa.indexOf("duration")&&l&&f('<span class="hap-playlist-duration">'+l+"</span>").appendTo(k),-1!=fa.indexOf("date")&&X&&f('<span class="hap-playlist-date">'+X+"</span>").appendTo(k)}e.attr("data-type",Cc);void 0!=r.mediaId&&e.attr("data-media-id",r.mediaId);r.title&&(X=r.title.replace(/['"\|]/g,""),l=q.getTitle(r,!0),e.attr({title:l,"data-title":r.title,"data-safe-title":X}),
r.safeTitle=X);r.artist&&(X=r.artist.replace(/['"\|]/g,""),e.attr({"data-artist":r.artist,"data-safe-artist":X}),r.safeArtist=X);r.description&&e.attr("data-description",r.description);r.link&&e.attr("data-link",r.link);r.share&&e.attr("data-share",r.share);r.category&&e.attr("data-category",r.category);r.tag&&e.attr("data-tag",r.tag);c.useStatistics&&Dc.length?(Q=c.playlistItemMarkup?e.find(".hap-playlist-icons"):f('<div class="hap-playlist-icons"></div>').appendTo(e),X=f('<div class="hap-stats"></div>'),
Q.prepend(X),-1!=Dc.indexOf("plays")&&(l=f('<div class="hap-stat-icon hap-play-count" title="'+c.tooltipStatPlays+'">'+c.statPlayIcon+"<span>0</span></div>"),X.append(l)),-1!=Dc.indexOf("likes")&&(l=f('<div class="hap-stat-icon hap-like-count" title="'+c.tooltipStatLikes+'">'+c.statLikeIcon+"<span>0</span></div>"),X.append(l)),-1!=Dc.indexOf("downloads")&&(l=Kd&&void 0!=r.download?f('<a href="'+r.download+'" class="hap-stat-icon hap-download-count" download aria-label="'+c.tooltipStatDownloads+'" title="'+
c.tooltipStatDownloads+'">'+c.statDownloadIcon+"<span>0</span></a>"):f('<div class="hap-stat-icon hap-download-count hap-no-download" title="'+c.tooltipStatDownloads+'">'+c.statDownloadIcon+"<span>0</span></div>"),X.append(l))):c.createDownloadIconsInPlaylist&&Kd&&r.download&&(Q=c.playlistItemMarkup?e.find(".hap-playlist-icons"):f('<div class="hap-playlist-icons"></div>').appendTo(e),X=f('<a class="hap-download" href="'+r.download+'" download title="'+c.downloadIconTitle+'" aria-label="'+c.downloadIconTitle+
'">'+c.downloadIcon+"</a>"),Q.prepend(X));c.createLinkIconsInPlaylist&&r.link&&(Q||(Q=c.playlistItemMarkup?e.find(".hap-playlist-icons"):f('<div class="hap-playlist-icons"></div>').appendTo(e)),l=f('<a class="hap-link" href="'+r.link+'" target="'+(r.target||"_blank")+'" title="'+c.linkIconTitle+'" aria-label="'+c.linkIconTitle+'">'+c.linkIcon+"</a>"),Q.prepend(l));r.customContent&&(e.append(r.customContent),delete r.customContent);if(c.addPlaylistEvents&&(Ca.on("click",A),!ac))Ca.on("mouseenter",
ha).on("mouseleave",I);if(fb){Ld?Ld.after(e):Eb?e.appendTo(x):x.children("div").eq(La).before(e);var Ld=e}else e.appendTo(x)}else c.useStatistics&&void 0!=r.mediaId&&(r.title&&(X=r.title.replace(/['"\|]/g,""),r.safeTitle=X),r.artist&&(X=r.artist.replace(/['"\|]/g,""),r.safeArtist=X));void 0!=Ja&&(r.playlistId=Ja);pb?F.push({id:a,type:Cc,data:r}):R.splice(W,0,{id:W,type:Cc,data:r});gd.push({id:W,type:Cc,data:r})}pb?(Xb[ra].data=F,Md?(Fb(!1),c.useStatistics&&Ec()):(R=F,Fb(!0),c.useStatistics&&Ec(),
O.setPlaylistItems(z)),Fc(),G=zc[0],G.style.height=G.scrollHeight+"px",hd=!1,Md=!0):(sb=x,console.log("playlistDataArr = ",R),Fb(!0),c.useStatistics&&Ec(),fb?(W=O.getCounter(),O.setPlaylistItems(z,!1),La<=W&&(Eb||O.reSetCounter(W+G)),Gc&&O.setCounter(La,!1),Hc=!1):O.setPlaylistItems(z),Fc())}function Gd(a,b){var d,e=a.length,h="";for(d=0;d<e;d++){var k=a[d].parent.replace(/"/g,"'");"undefined"!==b.activeAccordion&&b.activeAccordion==k&&(ra=d);h+='<div class="hap-accordion-item" data-id="'+d+'" title="'+
k+'"><span class="hap-accordion-item-title">'+k+'</span><div class="hap-accordion-item-content">';a[d].description&&(h+='<span class="hap-accordion-item-description">'+a[d].description+"</span>");h+="</div></div>"}x.html(h)}function Fb(a){a&&(z=R.length);if(c.usePlaylist){var b=0,d,e,h;x.find(".hap-playlist-item").each(function(){d=f(this).attr("data-id",b);h=d.find(".hap-playlist-title");h.length&&c.useNumbersInPlaylist&&(e=HAPUtils.formatNumber(b)+c.numberTitleSeparator,d.find(".hap-playlist-title-num").length?
d.find(".hap-playlist-title-num").html(e):h.before(f('<span class="hap-playlist-title-num">'+e+"</span>")));a&&(R[b].id=b);b++})}}function Ec(){var a,b=[];for(a=0;a<z;a++){var d=R[a].data;d.id=a;d.hapStatsSet||void 0==d.mediaId||(b.push({media_id:d.mediaId,title:d.safeTitle||"",artist:d.safeArtist||""}),d.hapStatsSet=!0)}b.length&&Gb("hap_all_count",null,b)}function oe(a){a.mCustomScrollbar({axis:"horizontal"==c.playlistScrollOrientation?"x":"y",theme:c.playlistScrollTheme,scrollInertia:0,mouseWheel:{normalizeDelta:!0,
deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){a.find(".mCSB_container").addClass("hap-mCSB_full")},onOverflowY:function(){a.find(".mCSB_container").removeClass("hap-mCSB_full")},onTotalScroll:function(){ua?V&&ma&&!ba&&(ba=!0,ta.show(),na=!0,P=[],pa&&pa.css("opacity",0),"soundcloud"==ma?Jd():"podcast"==ma?Id():"folder"==ma?Hd():"youtube"==ma&&(eb||Pa("youtube"),eb.resumeLoad(V))):Xa&&(na||id())}}})}function Fc(){ta.hide();
ba=!1;if(!y){y=!0;if(D&&void 0!=D.attr("data-use-pagination")&&(tb=Math.ceil(yb/bb),yb>bb)){va=0;jd(va);var a;for(a=0;a<tb;a++){var b=0==a?{page:0}:{page:null};Hb.push(b)}Nd(va)}c.usePlaylistScroll&&!bc&&(Wa.length&&oe(Wa),bc=!0);setTimeout(function(){c.hidePlayerUntilMusicStart||(-1<ea.indexOf("hap-fixed")&&Od(),c.addResizeEvent&&kd(),Ic.css("opacity",1));f(q).trigger("setupDone",{instance:q,instanceName:c.instanceName})},100);if(za)za.setVolume(c.volume);else var d=setInterval(function(){za&&(clearInterval(d),
za.setVolume(c.volume))},100);pb&&(Ib=n.find(".hap-accordion-item").eq(ra),n.find(".hap-accordion-item-title").on("click",function(){var k=f(this).closest(".hap-accordion-item");if(k.hasClass("hap-accordion-item-opened")){k.removeClass("hap-accordion-item-opened");var l=k.find(".hap-accordion-item-content")[0];l.style.height="0"}else{c.allowOnlyOneOpenedAccordion&&Ib&&Ib!=k&&(Ib.removeClass("hap-accordion-item-opened"),l=Ib.find(".hap-accordion-item-content")[0],l.style.height="0");if(k.hasClass("hap-accordion-item-inited"))l=
k.find(".hap-accordion-item-content")[0],l.style.height=l.scrollHeight+"px";else{if(hd)return!1;hd=!0;ta.show();ra=k.attr("data-id");x=zc=k.addClass("hap-accordion-item-inited").find(".hap-accordion-item-content");P=Xb[ra].media;fd?(Ya=-1,oa=P.length-1,$b()):Ka()}Ib=k.addClass("hap-accordion-item-opened")}}))}if(c.usePlaylist&&0<z){var e=[];x.find(".hap-thumbimg:not(.hap-visible)").each(function(){e.push(f(this))});var h=0;a=e.length;for(b=0;b<a;b++)setTimeout(function(){clearTimeout(this);e[h].addClass("hap-visible");
h++},50+50*b);HAPUtils.isEmpty(Aa)||q.sort(Aa)}if(!Jc&&(Jc=!0,!fb&&!na&&0<z))if(void 0!=c.mediaId){c.mediaTitle?(a=x.find(".hap-playlist-item[data-media-id="+c.mediaId+'][data-safe-title="'+c.mediaTitle+'"]'),0==a.length&&(a=x.find(".hap-playlist-item[data-media-id="+c.mediaId+"]")),delete c.mediaTitle):a=x.find(".hap-playlist-item[data-media-id="+c.mediaId+"]");a=x.children(".hap-playlist-item").index(a);if(void 0==a||-1==a)return alert("No media with ID to load! LoadMedia failed."),!1;delete c.mediaId;
O.processPlaylistRequest(a)}else a=c.activeItem,a>z-1&&(a=z-1),-1<a&&O.setCounter(a,!1);na=fb=!1;pa&&(ua?V?pa.css("opacity",1):(pa.remove(),pa=null,ua=!1):Xa?0<yb?yb>cb?pa.css("opacity",1):(pa.remove(),pa=null,Xa=!1):(pa.remove(),pa=null):(pa.remove(),pa=null));f(q).trigger("playlistEndLoad",{instance:q,instanceName:c.instanceName,loadMoreOnTotalScroll:ua,addMoreOnTotalScroll:Xa,playlistLength:z});-1<ea.indexOf("hap-wall")&&(Kc?x.masonry("reloadItems"):("undefined"===typeof f.fn.masonry&&console.log("Link to masonry.pkgd.min.js file missing in head tag!"),
"function"!==typeof imagesLoaded&&console.log("Link to imagesloaded.pkgd.min file missing in head tag!"),Kc=x.masonry({itemSelector:".hap-playlist-item",columnWidth:".hap-grid-sizer"})),x.imagesLoaded(function(){Kc.masonry("layout")}),x.find(".hap-playlist-item-content:not(.hap-has-overlay)").each(function(){f(this).addClass("hap-has-overlay").find(".hap-playlist-thumb").after(f('<div class="hap-wall-overlay"></div>'))}))}function Pd(){Za=new Hls;ld=Hls.isSupported();Qd=!0;Za.on(Hls.Events.MEDIA_ATTACHED,
function(){Za.loadSource(S)});Za.on(Hls.Events.ERROR,function(a,b){if(b.fatal)switch(b.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover");Za.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover");Za.recoverMediaError();break;default:Za.destroy()}})}function cc(){if("hls"==p){if(S=m.path,!Qd){if("undefined"===typeof Hls){var a=document.createElement("script");a.type="text/javascript";a.src="https://cdn.jsdelivr.net/npm/hls.js@latest";
a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(Pd(),cc())};a.onerror=function(){alert("Error loading "+this.src)};var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}else Pd(),cc();return}}else if("shoutcast"==p||"icecast"==p||"radiojar"==p)S=c.useCorsForAudio?c.cors+m.path:m.path,m.mountpoint&&(S+=m.mountpoint),"shoutcast"==p&&"/;"!=S.substring(S.length-2)&&(S+="/;"),dc||("undefined"===typeof HAPRadioData&&console.log("link to radio.js file missing in head tag!"),
dc=new HAPRadioData(c,ia),f(dc).on("HAPRadioData.DATA_READY",function(d,e){e.title&&(m.title=e.title);e.artist&&(m.artist=e.artist);e.thumb&&(m.thumb=e.thumb);Lc()})),dc.getData(m);else if(c.useAudioPreview&&m.audioPreview)S=m.audioPreview;else for(a=0;a<Rd.length;a++)if(b=Rd[a],"mp3"==b){if(pe&&m.mp3){S=m.mp3;break}}else if("aac"==b){if(qe&&m.aac){S=m.aac;break}}else if("wav"==b){if(re&&m.wav){S=m.wav;break}}else if("flac"==b){if(se&&m.flac){S=m.flac;break}}else if("path"==b&&m.path){S=m.path;break}if(S){-1!=
S.indexOf("ebsfm:")&&(S=atob(S.substr(6)));"audio"==p&&Ra&&!HAPUtils.relativePath(S)&&(S=Ra+S);Mc.on("ended",function(){K&&K.isAdEndOn()||(lb&&Ha&&!wa&&!ic.isDrag()?(wa=!0,w.currentTime=xa,w.play()):Yc())}).on("canplay",function(d){}).on("canplaythrough",function(d){}).on("loadedmetadata",function(){void 0==m.playbackRate&&(m.playbackRate=1);w.playbackRate=m.playbackRate;mb&&mb.setVisual(m.playbackRate);"audio"==p&&(c.resumeTime?(w.currentTime=c.resumeTime,delete c.resumeTime):m.start&&(w.currentTime=
m.start));var d=w.duration;HAPUtils.isNumber(d)&&Ma.html(HAPUtils.formatTime(d))}).on("play",function(){Ad()}).on("pause",function(){Bd()}).on("seeked",function(){lb&&Ha&&setTimeout(function(){clearTimeout(this);wa=!1},500)}).on("error",function(d){f(q).trigger("soundError",{instance:q,instanceName:c.instanceName,media:m,error:d})});if("hls"==p){if("file:"==window.location.protocol)return console.log("Playing HLS requires server connection!"),!1;if(ld)Za.attachMedia(w);else if(w.canPlayType("application/vnd.apple.mpegurl"))w.src=
S;else if(m.mp3)w.src=m.mp3;else{alert("This browser or device does not support HLS extension. Please use mp3 audio for playback!");return}qa&&(a=w.play(),void 0!==a&&a.then(function(){})["catch"](function(d){}))}else w.src=S,qa&&(a=w.play(),void 0!==a&&a.then(function(){})["catch"](function(d){}));w.volume=xb;qa=!0;"shoutcast"!=p&&"icecast"!=p&&"radiojar"!=p&&(ab&&clearInterval(ab),ab=setInterval(yd,zd))}else alert("No required audio format supplied! Please add mp3 audio format to play!")}function yd(){if(!(nb||
c.pauseAudioDuringAds&&K&&K.isAdOn())){if("youtube"==p){if(E){var a=E.getCurrentTime(),b=E.getDuration();var d=E.getVideoLoadedFraction()}}else if("audio"==p&&w&&(a=w.currentTime,b=w.duration,HAPUtils.isNumber(a)&&HAPUtils.isNumber(b)&&"undefined"!==typeof w.buffered&&0!=w.buffered.length)){try{var e=w.buffered.end(w.buffered.length-1)}catch(h){}isNaN(e)||(d=e/b)}HAPUtils.isNumber(a)&&HAPUtils.isNumber(b)&&(!Nc&&0<a&&hb&&(Nc=!0,f(q).trigger("soundPlay",{instance:q,instanceName:c.instanceName,media:m})),
Qb?kc.drawSeekbar(d,a,b):(ya.width(a/b*Z),d&&Sd.width(d*Z)),Sa.html(HAPUtils.formatTime(a)),Ma.html(HAPUtils.formatTime(b)),!nb&&m.end&&a>=m.end?Yc():lb&&Ha&&!wa&&!ic.isDrag()&&(parseInt(a,10)<parseInt(xa,10)||a>$a)&&(wa=!0,q.seek(xa)))}}function Ad(){Sb||(Sb=!0,Z=Rb.width(),m.adMid&&K.adMidStartHandler());m.adMid&&K.adMidPlayHandler();if(c.togglePlaybackOnMultipleInstances&&1<hap_mediaArr.length){var a,b=hap_mediaArr.length;for(a=0;a<b;a++)q!=hap_mediaArr[a].inst&&hap_mediaArr[a].inst.pauseMedia()}Nc&&
f(q).trigger("soundPlay",{instance:q,instanceName:c.instanceName,media:m});Da.find(".hap-btn-play").hide();Da.find(".hap-btn-pause").show();hb=!0;c.hidePlayerUntilMusicStart&&Td();Oc&&"undefined"!==typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+c.instanceName,eventAction:"played",eventLabel:"title: "+q.getTitle(m,!0)+" | time: "+Math.round(q.getCurrentTime()),nonInteraction:!0});-1<ea.indexOf("hap-fixed")&&Ud(!0)}function Bd(){Da.find(".hap-btn-play").show();Da.find(".hap-btn-pause").hide();
hb=!1;f(q).trigger("soundPause",{instance:q,instanceName:c.instanceName,media:m});Oc&&"undefined"!==typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+c.instanceName,eventAction:"paused",eventLabel:"title: "+q.getTitle(m,!0)+" | time: "+Math.round(q.getCurrentTime()),nonInteraction:!0});-1<ea.indexOf("hap-fixed")&&Ud()}function Yc(){K&&K.clearAdMidTimeout();f(q).trigger("soundEnd",{instance:q,instanceName:c.instanceName,media:m});c.useStatistics&&Gb("hap_finish_count",Na);
Oc&&"undefined"!==typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+c.instanceName,eventAction:"ended",eventLabel:"title: "+q.getTitle(m,!0),nonInteraction:!0});m.adEnd?K.setAdEnd():Vd()}function Vd(a){var b=m.start||0;"single"==c.loopState?(a||Tb(),"youtube"==p?E&&(E.seekTo(b),E.playVideo()):(a&&(w.src=S),w.currentTime=b,w.play())):"off"!=c.loopState&&"playlist"!=c.loopState||q.nextMedia()}function Jb(){ab&&clearInterval(ab);K&&(K.cleanAds(),ya.removeClass("hap-ad-progress-level"),
ib.hide());"shoutcast"==p||"icecast"==p||"radiojar"==p?dc.destroy():"hls"==p?ld&&Za.detachMedia():"youtube"==p&&E&&(jc=!0,kb.hide(),sa&&E.stopVideo(),Zc=!1);w&&(w.pause(),w.src="");Mc&&Mc.off("ended canplay canplaythrough loadedmetadata pause play error timeupdate seeked");Sa.html("00:00");Ma.html("00:00");Wd.html("");Xd.html("");ya.width(0);Sd.width(0);p=null;Gc=Sb=hb=!1;te||(qa=!1);lb&&q.resetRange();Da.find(".hap-btn-play").show();Da.find(".hap-btn-pause").hide();Nc=!1;c.useTitleScroll&&ub&&ub.deactivate()}
function nc(){"undefined"!==typeof f.fn.masonry&&Kc&&x.masonry("destroy");p&&(Jb(),ja&&da());c.sortableTracks&&c.sortableTracksSet&&(x.sortable("destroy"),c.sortableTracksSet=!1);x.empty();sb=null;Jc=fb=!1;z=0;db=-1;R=[];P=[];aa=[];O.reSetCounter();Cb=xc=Bb=Ab=zb=wc=vc=Zb=D=null;Xa=!1;Ra=null;na=!1;ma=V=null;ua=!1;uc=tc=sc=rc=qc=pc=oc=cb=yb=bb=null;Aa="";Va.find(".hap-btn-sort-alpha-up").hide();Va.find(".hap-btn-sort-alpha-down").show();Yd.val("");Pc.hide();ec=fc=null;Hb=[];c.placeHolderThumb?(ia.css("opacity",
0),setTimeout(function(){ia.css("backgroundImage","url("+c.placeHolderThumb+")").css("opacity",1)},300)):ia.css("backgroundImage","none").css("opacity",0);f(q).trigger("destroyPlaylist",{instance:q,instanceName:c.instanceName})}function Tb(){Qc&&md&&(R[Na].data.start=q.getCurrentTime());c.useStatistics&&Gb("hap_play_count",Na)}function kd(){if(!y||!c.addResizeEvent)return!1;console.log("doneResizing");Z=Rb.width();K&&K.setSeekBarSize(Z);c.useTitleScroll&&ub&&ub.checkSize();if(lb&&"undefined"!==typeof xa&&
"undefined"!==typeof $a){var a=q.getDuration();"undefined"!==typeof a&&(Ea&&Ea.css("left",xa/a*Z+"px"),Oa&&Oa.css("left",$a/a*Z+"px"))}M.hide();a=n.width();a<c.playlistItemMultilineWidth?x.addClass("hap-playlist-item-multiline"):x.removeClass("hap-playlist-item-multiline");if(c.breakPointArr){var b,d=c.breakPointArr.length;for(b=0;b<d;b++){var e=c.breakPointArr[b];a<e?n.addClass("hap-breakpoint-"+e.toString()):n.removeClass("hap-breakpoint-"+e.toString())}}}function Lc(){console.log("setTitleAndThumb");
m.title&&Wd.html(m.title);m.artist&&Xd.html(m.artist);m.description&&n.find(".hap-player-desc").html(m.description);c.useTitleScroll&&ub&&ub.input(q.getTitle(m));if((!nd||!Zb)&&ia.length){var a=m.thumb||m.thumbDefault;a?Zd(a):"youtube"==p&&ia.css("opacity",1)}}function Zd(a){!Ra||m.thumbIsBase64||HAPUtils.relativePath(a)||(a=Ra+a);"soundcloud"==m.origtype&&c.soundCloudThumbQuality&&(a=a.replace("large.jpg",c.soundCloudThumbQuality));a=encodeURI(a);-1<ia.css("backgroundImage").indexOf(a)||(m.title?
ia.attr("aria-label",m.title):ia.attr("aria-label",""),nd?(ia.css("opacity",0),setTimeout(function(){ia.css("backgroundImage","url("+a+")").css("height",'100%').css("opacity",1)},300)):ia.css("backgroundImage","url("+a+")").css("opacity",1).css("height",'100%'),nd=!0,(-1<ea.indexOf("hap-metalic")||-1<ea.indexOf("hap-poster"))&&n.find(".hap-player-image").fadeOut(300,function(){f(this).css("backgroundImage","url("+a+")").fadeIn(300)}))}function ue(){var a=m.title||"";a="https://itunes.apple.com/search?type=jsonp&term=="+encodeURI(m.artist||
"")+"-"+encodeURI(a)+"&media=music&limit=1";f.ajax({url:a,dataType:"jsonp"}).done(function(b){if(b.results[0]&&b.results[0].artworkUrl100){var d=ia.width();d=HAPUtils.closestNumber(c.artworkSize,d);b=b.results[0].artworkUrl100.replace("100x100",d+"x"+d);R[Na].data.thumb=b;Zd(b)}}).fail(function(b,d,e){console.log(b,d,e)})}function Gb(a,b,d){if("file:"!=window.location.protocol){if("hap_all_count"==a)var e=[{name:"action",value:a},{name:"data",value:JSON.stringify(d)}];else if("hap_play_count"==a){if(!R[b])return;
d=R[b].data;if(void 0==d.mediaId)return;if(void 0==Ja)if(void 0!=d.playlistId)Ja=d.playlistId;else return;e=[{name:"action",value:a},{name:"playlist_id",value:Ja},{name:"media_id",value:d.mediaId},{name:"title",value:d.safeTitle||""},{name:"artist",value:d.safeArtist||""},{name:"currentTime",value:w.currentTime},{name:"duration",value:w.duration}]}else if("hap_download_count"==a||"hap_like_count"==a||"hap_finish_count"==a){d=R[b].data;if(void 0==d.mediaId)return;if(void 0==Ja)if(void 0!=d.playlistId)Ja=
d.playlistId;else return;e=[{name:"action",value:a},{name:"playlist_id",value:Ja},{name:"media_id",value:d.mediaId},{name:"title",value:d.safeTitle||""},{name:"artist",value:d.safeArtist||""}]}f.ajax({url:c.ajax_url,type:"post",data:e,dataType:"json"}).done(function(h){if(c.usePlaylist&&h){var k=x.find('.hap-playlist-item[data-id="'+b+'"]');if("hap_like_count"==a&&h.c_like)k.find(".hap-like-count span").html(HAPUtils.nFormatter(parseInt(h.c_like,10),1));else if("hap_download_count"==a&&h.c_download)k.find(".hap-download-count span").html(HAPUtils.nFormatter(parseInt(h.c_download,
10),1));else if("hap_play_count"==a&&h.c_play)k.find(".hap-play-count span").html(HAPUtils.nFormatter(parseInt(h.c_play,10),1));else if("hap_all_count"==a){var l=h.length,G;for(k=0;k<l;k++){var F=h[k];F.title&&F.artist?G=x.find('.hap-playlist-item[data-media-id="'+F.media_id+'"][data-safe-title="'+F.title+'"][data-safe-artist="'+F.artist+'"]'):F.title?G=x.find('.hap-playlist-item[data-media-id="'+F.media_id+'"][data-safe-title="'+F.title+'"]'):F.artist&&(G=x.find('.hap-playlist-item[data-media-id="'+
F.media_id+'"][data-safe-artist="'+F.artist+'"]'));G.find(".hap-like-count span").html(HAPUtils.nFormatter(parseInt(F.c_like,10),1));G.find(".hap-download-count span").html(HAPUtils.nFormatter(parseInt(F.c_download,10),1));G.find(".hap-play-count span").html(HAPUtils.nFormatter(parseInt(F.c_play,10),1))}}}}).fail(function(h,k,l){console.log("Error getStats: "+h.responseText,k,l)})}}function ve(){"function"===typeof f.fn.sortable?(x.sortable({items:".hap-playlist-item:not(.ui-draggable-handle)",handle:".hap-playlist-item-content",
revert:!1,update:function(a,b){if(ja){var d=ja.closest(".hap-playlist-item").index();O.reSetCounter(d)}Fb(!0)}}),c.sortableTracksSet=!0):console.log("Using sortable tracks requires link to jquery-ui.js and jquery.ui.touch-punch.js in head tag")}function Ud(a){jb.find(".hap-btn").hide();a?jb.find(".hap-btn-pause").show():jb.find(".hap-btn-play").show()}function id(){ta.show();na=!0;pa&&pa.css("opacity",0);var a=[{name:"action",value:"hap_add_more"},{name:"playlist_id",value:Ja},{name:"addMoreOffset",
value:cb},{name:"addMoreLimit",value:bb},{name:"addMoreSortOrder",value:oc},{name:"addMoreSortDirection",value:pc},{name:"encryptMediaPaths",value:qc},{name:"taxonomy",value:rc},{name:"category",value:sc},{name:"tag",value:tc},{name:"match",value:uc}];console.log(a);f.ajax({url:c.ajax_url,type:"post",data:a,dataType:"json"}).done(function(b){console.log(b);D&&void 0!=D.attr("data-add-more-offset")&&(cb=parseInt(D.attr("data-add-more-offset"),10)+bb,D.attr("data-add-more-offset",cb));q.addTrack(b)}).fail(function(b,
d,e){console.log(b,d,e);q.endLoadMore()})}function we(){ta.show();na=!0;var a=[{name:"action",value:"hap_paginate"},{name:"playlist_id",value:Ja},{name:"addMoreOffset",value:cb},{name:"addMoreLimit",value:bb},{name:"addMoreSortOrder",value:oc},{name:"addMoreSortDirection",value:pc},{name:"encryptMediaPaths",value:qc},{name:"taxonomy",value:rc},{name:"category",value:sc},{name:"tag",value:tc},{name:"match",value:uc}];console.log(a);f.ajax({url:c.ajax_url,type:"post",data:a,dataType:"json"}).done(function(b){console.log(b);
x.find(".hap-playlist-item:visible").addClass("hap-pagination-hidden").each(function(){f(this).find(".hap-thumbimg").removeClass("hap-visible")});q.addTrack(b);jd(va);Nd()}).fail(function(b,d,e){console.log(b,d,e);q.endLoadMore()})}function Nd(){Hb[va].page=va;var a=[];x.find(".hap-playlist-item:not(.hap-pagination-hidden)").each(function(){a.push(f(this))});Hb[va].media_id=a}function jd(a){a+=1;var b='<div class="hap-pagination-container">';1<a&&(b+='<div class="hap-pagination-page hap-pagination-prev" data-page-id="prev" title="'+
c.paginationPreviousBtnTitle+'">'+c.paginationPreviousBtnText+"</div>");3<a&&(b+='<div class="hap-pagination-page hap-pagination-start" data-page-id="0">1</div><div class="hap-pagination-dots">...</div>');if(0<a-2){var d=a-2;b+='<div class="hap-pagination-page" data-page-id="'+(d-1)+'">'+d+"</div>"}0<a-1&&(d=a-1,b+='<div class="hap-pagination-page" data-page-id="'+(d-1)+'">'+d+"</div>");d=a;b+='<div class="hap-pagination-page hap-pagination-currentpage" data-page-id="'+(d-1)+'">'+d+"</div>";a+1<tb+
1&&(d=a+1,b+='<div class="hap-pagination-page" data-page-id="'+(d-1)+'">'+d+"</div>");a+2<tb+1&&(d=a+2,b+='<div class="hap-pagination-page" data-page-id="'+(d-1)+'">'+d+"</div>");a<tb-2&&(d=tb,b+='<div class="hap-pagination-dots">...</div><div class="hap-pagination-page hap-pagination-end" data-page-id="'+(d-1)+'">'+d+"</div>");a<tb&&(b+='<div class="hap-pagination-page hap-pagination-next" data-page-id="next" title="'+c.paginationNextBtnTitle+'">'+c.paginationNextBtnText+"</div>");b+="</div>";ec?
ec.html(b):n.append('<div class="hap-pagination-wrap">'+b+"</div>");$d||($d=!0,ec=n.find(".hap-pagination-wrap").on("click",".hap-pagination-page:not(.hap-pagination-currentpage)",function(){if(!y||ba||na)return!1;na=!0;fc&&fc.removeClass("hap-pagination-currentpage");fc=f(this).addClass("hap-pagination-currentpage");var e=f(this).attr("data-page-id");va="prev"==e?va-1:"next"==e?va+1:parseInt(e,10);null==Hb[va].page?(cb=va*bb,we()):(x.find(".hap-playlist-item:visible").addClass("hap-pagination-hidden").each(function(){f(this).find(".hap-thumbimg").removeClass("hap-visible")}),
f(Hb[va].media_id).each(function(){var h=f(this).removeClass("hap-pagination-hidden").find(".hap-thumbimg").removeClass("hap-visible");setTimeout(function(){h.addClass("hap-visible")},20)}),jd(va),na=!1)}),fc=ec.find(".hap-pagination-currentpage"))}function Td(){c.hidePlayerUntilMusicStart&&(c.hidePlayerUntilMusicStart=!1,Ic.removeClass("hap-music-player-force-hidden"),kd(),-1<ea.indexOf("hap-fixed")&&Od(),setTimeout(function(){Ic.css("opacity",1)},50))}function Od(){-1<ea.indexOf("hap-fixed")&&(vb.on("click",
function(){c.playerOpened?(n.stop().animate({bottom:-n.height()+"px"},{duration:400,complete:function(){vb.find(".hap-btn").hide();vb.find(".hap-btn-player-open").show();0<z&&p&&jb.show()}}),c.playlistOpened=!1):(n.stop().animate({bottom:-Fa.height()+"px"},{duration:400}),vb.find(".hap-btn").hide(),vb.find(".hap-btn-player-close").show(),jb.hide());c.playerOpened=!c.playerOpened}),jb.on("click",function(a){q.togglePlayback()}),jb.find(".hap-btn-play").show(),n.hasClass("hap-fixed-inited")||(n.addClass("hap-fixed-inited"),
setTimeout(function(){c.playerOpened?(c.playlistOpened?n.css({bottom:"0px"}):n.css({bottom:-Fa.height()+"px"}),vb.find(".hap-btn-player-close").show()):(c.playlistOpened=!1,n.css({bottom:-n.height()+"px"}),vb.find(".hap-btn-player-open").show(),0<z&&p&&jb.show())},20)))}c=f.extend(!0,{},{volume_slider_js:"js/volume_slider.js",mediaId:null,mediaTitle:null,resumeTime:null,sourcePath:"",instanceName:"",queryInstance:"",playlistItemContent:"",playlistTitleOrder:"title,artist",statisticsContent:"plays,likes,downloads",
audioFormatOrder:"aac,wav,mp3,flac,path",dataInterval:250,volume:.5,activeItem:0,numberTitleSeparator:".&nbsp;",artistTitleSeparator:"&nbsp;-&nbsp;",useNumbersInPlaylist:!1,preload:"auto",autoPlay:!1,loopState:"playlist",addResizeEvent:!0,addPlaylistEvents:!0,sortableTracksSet:!1,randomPlay:!1,usePlaylist:!0,usePlaylistScroll:!1,useKeyboardNavigationForPlayback:!1,togglePlaybackOnMultipleInstances:!0,useTitleScroll:!1,titleScrollSpeed:1,titleScrollSeparator:" *** ",continousKey:"hap-continous-key",
useMediaSession:!0,createDownloadIconsInPlaylist:!1,createLinkIconsInPlaylist:!1,useShare:!0,linkIconTitle:"Purchase",downloadIconTitle:"Download",tooltipStatPlays:"Plays",tooltipStatLikes:"Likes",tooltipStatDownloads:"Downloads",artworkSize:[100,200,250,340,460,600],soundCloudThumbQuality:"t300x300.jpg",playbackRateMin:.5,playbackRateMax:2,sortOrder:"",getId3Image:!0,playlistItemMultilineWidth:600,searchDescriptionInPlaylist:!0,hideYoutubeAfterStart:!1,getRadioArtwork:!0,defaultSongArtist:"DATA NOT AVAILABLE",
defaultSongTitle:"DATA NOT AVAILABLE",lastPlayedInterval:1E4,enableCors:!0,cors:"https://kastproxy-us.herokuapp.com/,https://kastproxy-eu.herokuapp.com/,https://cors-anywhere.herokuapp.com/,https://cors.io/?",useCorsForAudio:!1,seekTime:10,paginationPreviousBtnTitle:"Previous",paginationPreviousBtnText:"Prev",paginationNextBtnTitle:"Next",paginationNextBtnText:"Next",whatsAppWarning:"Please share this content on mobile device!",downloadIcon:"<svg viewBox='0 0 512 512'><path d='M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z'></path></svg>",
linkIcon:"<svg viewBox='0 0 576 512'><path d='M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z'></path></svg>",
statDownloadIcon:"<svg viewBox='0 0 512 512'><path d='M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM212 140v116h-70.9c-10.7 0-16.1 13-8.5 20.5l114.9 114.3c4.7 4.7 12.2 4.7 16.9 0l114.9-114.3c7.6-7.6 2.2-20.5-8.5-20.5H300V140c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12z'></path></svg>",statLikeIcon:"<svg viewBox='0 0 512 512'><path d='M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z'></path></svg>",
statPlayIcon:"<svg viewBox='0 0 512 512'><path d='M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z'></path></svg>"},c);var Rc=HAPUtils.getUrlParameter(),gc=[],od=[];if(decodeURIComponent(Rc["hap-query-instance"])==c.instanceName&&(Object.keys(Rc).forEach(function(a){if(0==a.indexOf("hap-")){var b=a.substr(4).replace(/-([a-z])/g,function(d){return d[1].toUpperCase()});if(a=
decodeURIComponent(Rc[a]).replace(/\+/g," "))c.hasOwnProperty(b)?("true"===a?a=!0:"false"===a&&(a=!1),c[b]=a):(a=a.split(",").map(function(d){return d.trim()}),gc.push({key:b,value:a}))}}),gc.length)){var Ga,Sc,hc=gc.length,xe=gc[0].value.length;for(Sc=0;Sc<xe;Sc++){var pd={};for(Ga=0;Ga<hc;Ga++){var qd=gc[Ga];var Kb=qd.value[Sc];"true"===Kb?Kb=!0:"false"===Kb&&(Kb=!1);pd[qd.key]=Kb;"type"===qd.key&&(pd.origtype=Kb)}od.push(pd)}}Rc=null;var n=f(this).css("display","block");c.playerMarkup&&n.append(c.playerMarkup);
var Ic=n.find(".hap-player-outer");c.hidePlayerUntilMusicStart&&Ic.addClass("hap-music-player-force-hidden");var ea="";void 0!=n.attr("class")&&(ea=n.attr("class").split(/\s+/));if(c.customClass)if(-1<c.customClass.indexOf("|")){var ae=c.customClass.split(",");hc=ae.length;for(Ga=0;Ga<hc;Ga++){var be=ae[Ga].split("|");n.find(be[0]).addClass(be[1])}}else n.addClass(c.customClass);c.markup&&n.append(c.markup);var cd=f(c.playlistList),Fa=n.find(".hap-playlist-holder"),Wa=n.find(".hap-playlist-inner"),
x=n.find(".hap-playlist-content"),Pc=n.find(".hap-playlist-filter-msg"),Va=n.find(".hap-sort-alpha"),ye=n.find(".hap-popup-toggle"),Rb=n.find(".hap-progress-bg"),Sd=n.find(".hap-load-level"),ya=n.find(".hap-progress-level"),ze=n.find(".hap-volume-toggle");n.find(".hap-volume-seekbar");n.find(".hap-volume-bg");n.find(".hap-volume-level");var Tc=n.find(".hap-player-holder"),ia=n.find(".hap-player-thumb").attr("role","img"),ad=n.find(".hap-share-holder"),bd=n.find(".hap-playback-rate-holder"),Wd=n.find(".hap-player-title"),
Xd=n.find(".hap-player-artist"),Sa=n.find(".hap-media-time-current"),Ma=n.find(".hap-media-time-total"),ib=n.find(".hap-media-time-ad"),Da=n.find(".hap-playback-toggle"),qb=n.find(".hap-loop-toggle"),Qa=n.find(".hap-random-toggle"),Lb=n.find(".hap-range-toggle"),lc=n.find(".hap-playback-rate-toggle"),mc=n.find(".hap-share-toggle"),ta=n.find(".hap-preloader"),jb=n.find(".hap-playback-toggle-ex"),vb=n.find(".hap-player-toggle-ex"),ac=HAPUtils.isMobile(),ce=HAPUtils.hasLocalStorage(),qa=c.autoPlay,te=
qa,xb=c.volume,fa=c.playlistItemContent.replace(/\s+/g,"").split(","),ne=c.playlistTitleOrder.replace(/\s+/g,"").split(","),Dc=c.statisticsContent.replace(/\s+/g,"").split(","),Qc=c.useContinousPlayback&&ce,md=Qc&&c.continousPlaybackTrackAllSongs,rd=c.useMediaSession&&"mediaSession"in navigator&&"file:"!=window.location.protocol,Oc=c.useGa&&c.gaTrackingId,Aa=c.sortOrder,Rd=c.audioFormatOrder.split(",").map(function(a){return a.trim()}),Ae=c.fetchPlayerArtwork&&ia.length;c.playlistContent&&(x=f(c.playlistContent));
var q=this,y,ba;f("body");var Cd=f(window),Pb=f(document),sd,Kd=HAPUtils.hasDownloadSupport(),Ub=HAPUtils.isIOS();HAPUtils.isAndroid();var pe=HAPUtils.canPlayMp3(),re=HAPUtils.canPlayWav(),qe=HAPUtils.canPlayAac(),se=HAPUtils.canPlayFlac();HAPUtils.isChrome();HAPUtils.isSafari();var me=c.sourcePath+"includes/ba-simple-proxy.php",Yb=["playlist","single","off"],rb=Yb.indexOf(c.loopState),de=["audio","hls","shoutcast","icecast","radiojar"],Be="audio youtube_single hls shoutcast icecast radiojar".split(" "),
Ra,$d,fc,ec,tb,va,Hb=[],Kc,oa,Ya,Mc=f(document.createElement("audio")).attr("preload",c.preload),w=Mc[0],Nc,Xa,bb,yb,cb,qc,oc,pc,rc,sc,tc,uc,V,na,ma,ua,ed,dd,la,Ba=[],Za,ld,Qd,dc,K,Vb,Dd,Xc,eb,kb,E,vd,sa,Zc,jc,xd,wd,ee,bc,$c,Zb,vc,wc,zb,Ab,Bb,xc,Cb,Eb,La,fb,Gc,db=-1,Bc,R=[],gd=[],P=[],aa=[],D,z=0,Jc,sb,Ja,ja,Sb,p,S,Na,hb=!1,Hc,m,zd=c.dataInterval,ab,nb,Z,ob=HAPUtils.getEvents(),za,Ib,hd,pb,zc,Md,ra,Wb,Xb=[],fd;pb&&(c.usePlaylist=!0);if(c.placeHolderThumb){ia.css("opacity",0);setTimeout(function(){ia.css("backgroundImage",
"url("+c.placeHolderThumb+")").css("opacity",1)},300);var nd=!0}-1==fa.indexOf("description")&&(c.searchDescriptionInPlaylist=!1);"undefined"===typeof window.hap_mediaArr&&(window.hap_mediaArr=[]);window.hap_mediaArr.push({inst:q,id:c.instanceName});ac&&(qa=!1);-1==rb&&(c.loopState="off");rb=Yb.indexOf(c.loopState);qb.find(".hap-btn-loop-"+c.loopState).show();c.randomPlay?Qa.find(".hap-btn-random-on").show():Qa.find(".hap-btn-random-off").show();if(c.playlistSelector)f(c.playlistSelector).on("change",
function(){q.loadPlaylist(f(this).val())});c.breakPointArr&&"string"===typeof c.breakPointArr&&(c.breakPointArr=c.breakPointArr.split(","),HAPUtils.sortNumericArray(c.breakPointArr));0==x.length&&(c.usePlaylist=!1,c.usePlaylistScroll=!1,c.useNumbersInPlaylist=!1);ze.find(".hap-btn-volume-up").show();Va.find(".hap-btn-sort-alpha-down").show();Da.find(".hap-btn-play").show();c.sortableTracks&&!c.sortableTracksSet&&ve();var pa=n.find(".hap-load-more-btn").on("click",function(){if(!y||na)return!1;ua?
q.loadMore():Xa&&id();pa.css("opacity",0)}),ub;c.useTitleScroll&&("undefined"===typeof HAPTextScroller?console.log("link to textscroller.js file missing in head tag"):ub=new HAPTextScroller({settings:c,mask:n.find(".hap-media-title-mask"),container:n.find(".hap-media-title")}));var Yd=c.searchSelector?f(c.searchSelector):n.find(".hap-search-filter");Yd.on("keyup",function(){if(0==z)return!1;var a=f(this).val().toLowerCase(),b,d=0;for(b=0;b<z;b++){var e=x.children(".hap-playlist-item").eq(b);var h=
e.find(".hap-playlist-title").length?e.find(".hap-playlist-title").html().toLowerCase():"";c.searchDescriptionInPlaylist&&e.find(".hap-playlist-description").length&&(h+=e.find(".hap-playlist-description").html().toLowerCase());-1<h.indexOf(a)?e.show():(e.hide(),d++)}d==z?Pc.show():Pc.hide()});c.useShare&&"undefined"!==typeof HAPShareManager&&(Dd=new HAPShareManager(c));var O=new HAPPlaylistManager({loop:c.loopState,random:c.randomPlay});f(O).on("HAPPlaylistManager.COUNTER_READY",function(a,b){p&&
Jb();Na=b;m=R[Na].data;console.log(m,c.instanceName);p=m.type;"youtube_single"==p&&(p="youtube");if(Hc)Hc=!1;else{"shoutcast"==p||"icecast"==p||"radiojar"==p||"hls"==p?(Lb.hide(),Ia.hide(),Sa.hide(),Ma.hide(),"hls"==p&&Lc()):(Lb.show(),Ia.show(),Sa.show(),Ma.show(),Lc(),rd&&H());if(md&&c.lastPositionArr){var d,e=c.lastPositionArr.length;for(d=0;d<e;d++){var h=c.lastPositionArr[d];if(h.title&&m.title==h.title&&m.artist==h.artist){m.start=h.start;break}}}Ta(Na);m.thumb||m.thumbDefault||!Ae||ue();if(m.adPre||
m.adMid||m.adEnd)K?K.setAdData(m):("undefined"===typeof HAPAdManager&&console.log("link to admanager.js file missing in head tag!"),K=new HAPAdManager(c,q,m,xb,w,ya,ib,Z),f(K).on("HAPAdManager.IOS_ADMID_FIX_START",function(k,l){Vb=!0}).on("HAPAdManager.ADPRE_PLAY",function(k,l){ya.addClass("hap-ad-progress-level");Sa.hide();Ma.hide();ib.show()}).on("HAPAdManager.ADPRE_ENDED",function(k,l){ya.removeClass("hap-ad-progress-level");ib.hide();"shoutcast"!=p&&"icecast"!=p&&"radiojar"!=p&&(Sa.show(),Ma.show());
"youtube"==p?g():cc()}).on("HAPAdManager.ADMID_PLAY",function(k,l){q.pauseMedia();ya.addClass("hap-ad-progress-level");Sa.hide();Ma.hide();ib.show()}).on("HAPAdManager.ADMID_ENDED",function(k,l){ya.removeClass("hap-ad-progress-level");ib.hide();"shoutcast"!=p&&"icecast"!=p&&"radiojar"!=p&&(Sa.show(),Ma.show());q.playMedia()}).on("HAPAdManager.ADEND_PLAY",function(k,l){ya.addClass("hap-ad-progress-level");Sa.hide();Ma.hide();ib.show()}).on("HAPAdManager.ADEND_ENDED",function(k,l){ya.removeClass("hap-ad-progress-level");
ib.hide();"shoutcast"!=p&&"icecast"!=p&&"radiojar"!=p&&(Sa.show(),Ma.hide());Vd(!0)}));m.adPre?(K.initAdPre(),qa=!0,w.volume=xb,d=w.play(),void 0!==d&&d.then(function(){})["catch"](function(k){})):"youtube"==p?(g(),c.hidePlayerUntilMusicStart&&Td()):cc()}}).on("HAPPlaylistManager.PLAYLIST_END",function(){f(q).trigger("playlistEnd",{instance:q,instanceName:c.instanceName})});window.onYouTubeIframeAPIReady=function(){};Oc&&(window.ga||function(a,b,d,e,h,k,l){a.GoogleAnalyticsObject=h;a[h]=a[h]||function(){(a[h].q=
a[h].q||[]).push(arguments)};a[h].l=1*new Date;k=b.createElement(d);l=b.getElementsByTagName(d)[0];k.async=1;k.src=e;l.parentNode.insertBefore(k,l)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create",c.gaTrackingId,"auto"),ga("send","pageview"),n.on("click",".hap-download",function(a){if(!y)return!1;window.ga&&(a=f(this).closest(".hap-playlist-item").find(".hap-playlist-title").html(),ga("send",{hitType:"event",eventCategory:"Modern audio player: "+c.instanceName,
eventAction:"downloaded",eventLabel:"title: "+a,nonInteraction:!0}))}));Qc?(window.attachEvent||window.addEventListener)(Ub?"pagehide":"beforeunload",function(a){window.event&&(window.event.cancelBubble=!0);if(!y||!p)return!1;a={activePlaylist:c.activePlaylist,volume:xb,activeItem:O.getCounter(),resumeTime:q.getCurrentTime(),autoPlay:hb};if(md){var b,d=[];for(b=0;b<z;b++){var e=R[b].data;e.start&&d.push({title:e.title,artist:e.artist,start:e.start})}a.lastPositionArr=d}localStorage.setItem(c.continousKey,
JSON.stringify(a))}):localStorage.removeItem(c.continousKey);rd&&(navigator.mediaSession.setActionHandler("play",function(){q.playMedia()}),navigator.mediaSession.setActionHandler("pause",function(){q.pauseMedia()}),navigator.mediaSession.setActionHandler("previoustrack",function(){q.previousMedia()}),navigator.mediaSession.setActionHandler("nexttrack",function(){q.nextMedia()}),navigator.mediaSession.setActionHandler("seekbackward",function(){q.seekBackward()}),navigator.mediaSession.setActionHandler("seekforward",
function(){q.seekForward()}));var M=n.find(".hap-tooltip");ac||(M.length&&"static"==n.css("position")&&console.log("player css position is static, therefore tooltip might not work correctly. Please set wrapper css position to other than static if you use tooltip in player."),n.on("mouseenter","[data-tooltip]",function(a){var b=f(this);a=n[0].getBoundingClientRect();var d=b[0].getBoundingClientRect();M.text(b.attr("data-tooltip"));var e=parseInt(d.top-a.top-M.outerHeight());b=parseInt(d.left-a.left-
M.outerWidth()/2+b.outerWidth()/2);b+M.outerWidth()>n.width()?b=n.width()-M.outerWidth():0>b&&(b=0);0>e+a.top&&(e=parseInt(d.top-a.top+M.outerHeight()+15));M.css({left:b+"px",top:e+"px"}).show()}).on("mouseleave","[data-tooltip]",function(a){M.hide()}));var Qb=n.find(".hap-circle-player").length,kc;Qb&&HAPUtils.hasCanvas()&&("undefined"===typeof HAPCirclePlayer?console.log("Link to circleplayer.js file missing in head tag!"):kc=new HAPCirclePlayer({settings:c,parent:n}));var Ia=Qb?n.find(".hap-progress-canvas"):
n.find(".hap-seekbar");Ia.on(ob.downEvent,function(a){if(c.disableSeekbarInRange&&Ha||ee||c.disableSongSkip||K&&K.isAdOn()||!p)return!1;ka(a);return!1});if(!ac){var Uc=function(){Ia.off(ob.moveEvent,ca).off("mouseout",Uc);Pb.off("mouseout",Uc);M.hide()};Ia.on("mouseover",function(){if(!nb){if(K&&K.isAdOn())return!1;Ia.on(ob.moveEvent,ca).on("mouseout",Uc);Pb.on("mouseout",Uc)}})}if("undefined"===typeof HAPVolumeSlider){var Mb=document.createElement("script");Mb.type="text/javascript";Mb.src=HAPUtils.qualifyURL(c.sourcePath+
c.volume_slider_js);Mb.onload=Mb.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||U()};Mb.onerror=function(){alert("Error loading "+this.src)};console.log(document.getElementsByTagName("script"));var fe=document.getElementsByTagName("script")[0];fe.parentNode.insertBefore(Mb,fe)}else U();var Ea=n.find(".hap-range-handle-a"),Oa=n.find(".hap-range-handle-b"),td=parseInt(Ea.attr("data-width"),10),Ce=parseInt(Oa.attr("data-width"),10),xa,$a,Vc,Wc,Ha,wa;q.toggleRange=function(){p&&
(Ha?(Ea.css("display","none"),Oa.css("display","none"),wa=!0):(Ea.css("display","block"),Oa.css("display","block"),Vc=parseInt(Ea.css("left"),10),Wc=parseInt(Oa.css("left"),10),xa=N(Vc),$a=N(Wc),wa=!1),(Ha=!Ha)?Lb.addClass("hap-contr-btn-hover"):Lb.removeClass("hap-contr-btn-hover"))};q.resetRange=function(){Ha=!1;wa=!0;Ea.css({display:"none",left:"0px"});Oa.css({display:"none",left:Z+"px"});Lb.removeClass("hap-contr-btn-hover")};q.setRange=function(a,b){var d=q.getDuration();if("undefined"===typeof d)return!1;
0>a&&(a=0);b>d&&(b=d);xa=a;$a=b;wa=!1;Ea.css("left",xa/d*Z+"px");Oa.css("left",$a/d*Z+"px");Ha||q.toggleRange()};q.getRange=function(){return"undefined"!==typeof xa&&"undefined"!==typeof $a?[xa,$a]:null};if(Ea.length){var lb=!0;var ic=new HAPRangeSlider({settings:c,range_handle_a:Ea,range_handle_b:Oa});f(ic).on("HAPRangeSlider.RANGE_CHANGE",function(a,b){var d=b.point.pageX-Rb.offset().left,e=b.elem;0>d?d=0:d>Z&&(d=Z);e.hasClass("hap-range-handle-a")?(d>parseInt(Oa.css("left"),10)-Ce&&(d=parseInt(Oa.css("left"),
10)-td),Vc=d,xa=N(Vc)):(d<parseInt(Ea.css("left"),10)+td&&(d=parseInt(Ea.css("left"),10)+td),Wc=d,$a=N(Wc));e.css("left",d+"px");b.event?ca(b.event):M.hide()})}var ud=n.find(".hap-playback-rate-seekbar");if(ud.length){var mb=new HAPPlaybackRateSlider({settings:c,wrapper:n,seekbar:ud,sliderBg:n.find(".hap-playback-rate-bg"),sliderLevel:n.find(".hap-playback-rate-level"),isVertical:ud.hasClass("hap-vertical"),tooltip:M});f(mb).on("HAPPlaybackRateSlider.RANGE_CHANGE",function(a,b){q.setPlaybackRate(b.value,
!0)})}if(c.disableRightClickOverPlayer)n.on("contextmenu",function(){return!1});if(c.useKeyboardNavigationForPlayback)Pb.off("keyup.hap").on("keydown.hap",function(a){if(!y)return!1;var b=a.keyCode,d=f(a.target);if(37==b)q.previousMedia();else if(39==b)q.nextMedia();else if(32==b){if(d.hasClass("hap-search-filter"))return!1;a.preventDefault();q.togglePlayback()}else if(77==b){if(d.hasClass("hap-search-filter"))return!1;za&&za.toggleMute()}});var ge=[n.find(".hap-next-toggle"),n.find(".hap-prev-toggle"),
n.find(".hap-skip-forward"),n.find(".hap-skip-backward"),n.find(".hap-playlist-toggle"),n.find(".hap-playlist-close"),mc,n.find(".hap-share-close"),n.find(".hap-share-item"),n.find(".hap-playback-rate-close"),lc,Lb,ye,Va,Da,qb,Qa];hc=ge.length;for(Ga=0;Ga<hc;Ga++)f(ge[Ga]).css("cursor","pointer").on("click",Y);window.onbeforeunload=function(a){c.useStatistics&&Na&&Gb("hap_play_count",Na)};if(c.addResizeEvent)Cd.on("resize",function(){if(!y)return!1;sd&&clearTimeout(sd);sd=setTimeout(kd,150)});this.getTitle=
function(a,b){if(a.artist&&!HAPUtils.isEmpty(a.artist)&&a.title&&!HAPUtils.isEmpty(a.title))var d=b?a.artist+" - "+a.title:a.artist+c.artistTitleSeparator+a.title;else a.title&&!HAPUtils.isEmpty(a.title)?d=a.title:a.artist&&!HAPUtils.isEmpty(a.artist)&&(d=a.artist);return d};c.useStatistics&&(n.on("click",".hap-like-count",function(a){if(!y||!p)return!1;a=f(this).closest(".hap-playlist-item");Gb("hap_like_count",a.attr("data-id"))}),n.on("click",".hap-download-count:not(.hap-no-download)",function(a){if(!y||
!p)return!1;a=f(this).closest(".hap-playlist-item");Gb("hap_download_count",a.attr("data-id"))}));this.playMedia=function(){if(!y||!p||hb)return!1;if("youtube"==p)E&&sa&&E.playVideo();else if(w){"shoutcast"!=p&&"icecast"!=p&&"radiojar"!=p||w.load();var a=w.play();void 0!==a&&a.then(function(){})["catch"](function(b){})}};this.pauseMedia=function(){if(!y||!p||!hb)return!1;"youtube"==p?E&&sa&&E.pauseVideo():w&&w.pause()};this.togglePlayback=function(){if(!y||!p)return!1;K&&K.clearAdMidTimeout();if(K&&
K.isAdMidOn())K.toggleAdMidAudio();else if("youtube"==p){if(E&&sa){var a=E.getPlayerState();1==a?E.pauseVideo():2==a?E.playVideo():(-1==a||5==a||0==a)&&E.playVideo()}}else w&&(w.paused?("shoutcast"!=p&&"icecast"!=p&&"radiojar"!=p||w.load(),a=w.play(),void 0!==a&&a.then(function(){K&&K.isAdPreOn()&&(Da.find(".hap-btn-play").hide(),Da.find(".hap-btn-pause").show())})["catch"](function(b){})):(w.pause(),K&&K.isAdPreOn()&&(Da.find(".hap-btn-play").show(),Da.find(".hap-btn-pause").hide())))};this.nextMedia=
function(){if(!y)return!1;0!=z&&(Tb(),O.advanceHandler(1,!0))};this.previousMedia=function(){if(!y)return!1;0!=z&&(Tb(),O.advanceHandler(-1,!0))};this.loadMedia=function(a,b,d,e){if(!y||ba)return!1;if(0!=z){var h=-1;if("title"==a){for(a=0;a<z;a++)if(b==R[a].data.title){h=a;var k=!0;break}if(!k)return alert('No media with title "'+b+'" to load! LoadMedia failed.'),!1}else if("title-artist"==a){var l=x.find('.hap-playlist-item[data-title="'+d+'"][data-artist="'+e+'"]');if(0==l.length)return alert('No media with title "'+
d+'" and artist "'+e+'" to load! LoadMedia failed.'),!1;h=l.attr("data-id")}else if("counter"==a){if(0>b||b>z-1)return alert('Invalid track number. Track number  "'+b+'" doesnt exist. LoadMedia failed.'),!1;h=b}else if("id"==a){l=x.find(".hap-playlist-item[data-media-id="+b+"]");if(0==l.length)return alert("No media with media ID "+b+" to load! LoadMedia failed."),!1;h=l.attr("data-id")}else if("id-title"==a){d&&e?l=x.find('.hap-playlist-item[data-media-id="'+b+'"][data-title="'+d+'"][data-artist="'+
e+'"]'):d?l=x.find('.hap-playlist-item[data-media-id="'+b+'"][data-title="'+d+'"]'):e&&(l=x.find('.hap-playlist-item[data-media-id="'+b+'"][data-artist="'+e+'"]'));if(0==l.length)return alert("No media with media ID "+b+" to load! LoadMedia failed."),!1;h=l.attr("data-id")}else return console.log("loadMedia function requires format parameter!"),!1;Tb();qa=!0;O.processPlaylistRequest(h)}};this.loadMore=function(){console.log(ma);if(!y||!ma||!V||ba)return!1;ba=!0;ta.show();na=!0;P=[];"soundcloud"==
ma?Jd():"podcast"==ma?Id():"folder"==ma?Hd():"youtube"==ma&&(eb||Pa("youtube"),eb.resumeLoad(V))};this.setLoadMore=function(a){ua=a};this.endLoadMore=function(){ba=!1;ta.hide();na=!1};this.addMore=function(){if(!y||ba)return!1;Xa&&(na||id())};this.setAddMore=function(a){Xa=a};this.loadPlaylist=function(a,b){if(!y||ba)return!1;if("string"===typeof a){c.mediaId=b;if(c.activePlaylist==a)return!1;Ua(a)}else return alert("Invalid value loadPlaylist!"),!1};this.addTrack=function(a,b,d,e){if(!y||ba)return!1;
if("undefined"===typeof a)return alert("addTrack method requires track parameter. AddTrack failed."),!1;Gc=!1;"undefined"!==typeof b&&(Gc=b,0==b&&(Hc=!0));e?(Bc=!0,Jc=!1):Bc=!1;Pc.hide();La=d;Eb=!1;fb=!0;sb?"undefined"!==typeof La?0>La?La=0:(La=z,Eb=!0):(Eb=!0,La=z):(La=0,Eb=!0);ba=!0;ta.show();db=-1;P=[];aa=[];Array.isArray(a)?aa=a:aa.push(a);z=aa.length;sb=x;Bc?(P=aa,Ka()):v()};this.inputAudio=function(a){if(!y||ba)return!1;if("undefined"===typeof a)return alert("inputAudio method requires data parameter. inputAudio failed."),
!1;ja&&da();0<z&&O.reSetCounter();m=a;p=a.type;if(-1==de.indexOf(p))return alert("inputAudio method supports tracks that dont require processing: "+de),!1;"shoutcast"!=p&&"icecast"!=p&&"radiojar"!=p&&(Lc(),rd&&H());qa=!0;cc()};this.removeTrack=function(a,b){if(!y||ba)return!1;if(0!=z){if("title"==a){var d;for(d=0;d<z;d++)if(b==R[d].data.title){var e=x.children(".hap-playlist-item").eq(d);var h=!0;break}if(!h)return alert('Track with title "'+b+'" doesnt exist. RemoveTrack failed.'),!1}else if("counter"==
a){b=parseInt(b,10);if(0>b||b>z-1)return alert('Track number  "'+b+'" doesnt exist. RemoveTrack failed.'),!1;e=x.find(".hap-playlist-item").eq(b)}else if("id"==a){if(e=x.find(".hap-playlist-item[data-media-id="+b+"]"),0==e.length)return alert('Track with media id "'+b+'" doesnt exist. RemoveTrack failed.'),!1}else return alert("removeTrack method failed."),!1;e.remove();R.splice(parseInt(e.attr("data-id"),10),1);Fb(!0);0<z?(e=O.getCounter(),b==e?(Jb(),O.setPlaylistItems(z)):(O.setPlaylistItems(z,
!1),b<e&&O.reSetCounter(O.getCounter()-1))):nc()}};this.sort=function(a){if(!y||3>z)return!1;if("undefined"===typeof a)return console.log("Sort method requires order parameter. Sort method failed."),!1;if(Aa==d)return!1;var b=x.children(".hap-playlist-item"),d=a.toLowerCase();if("title-asc"==d){HAPUtils.keysrt2(R,"data","title");var e;a=[];for(e=0;e<z;e++)a.push(R[e].id);Va.find(".hap-btn-sort-alpha-up").hide();Va.find(".hap-btn-sort-alpha-down").show()}else if("title-desc"==d){HAPUtils.keysrt2(R,
"data","title",!0);a=[];for(e=0;e<z;e++)a.push(R[e].id);Va.find(".hap-btn-sort-alpha-up").show();Va.find(".hap-btn-sort-alpha-down").hide()}else if("random"==d)a=HAPUtils.randomiseArray(z),R=HAPUtils.sortArray(R,a);else{console.log("Unknown sort order. Sort method failed.");return}Aa=d;d=Na;x.append(f.map(a,function(h){return b[h]}));-1!=d&&(d=x.children(".hap-playlist-item[data-id='"+d+"']").index(),O.reSetCounter(d));Fb(!0)};this.destroyInstance=function(){nc();Jb();c.usePlaylistScroll&&(Wa.mCustomScrollbar("destroy"),
bc=!1)};this.destroyInstance2=function(){Jb();c.usePlaylistScroll&&(Wa.mCustomScrollbar("destroy"),bc=!1);c.sortableTracks&&c.sortableTracksSet&&(x.sortable("destroy"),c.sortableTracksSet=!1)};this.destroyMedia=function(){if(!y)return!1;y&&p&&(ja&&da(),Jb(),O.reSetCounter())};this.destroyPlaylist=function(){if(!y)return!1;nc()};this.setPlaybackRate=function(a,b){if(!y||!p)return!1;m.playbackRate=a;zb&&(zb=a);"youtube"==p?E.setPlaybackRate(a):w&&(w.playbackRate=a);b||mb&&mb.setVisual(a)};this.toggleRandom=
function(a){if(!y||"undefined"===typeof O)return!1;c.randomPlay="undefined"!==typeof a?a:!c.randomPlay;O.setRandom(c.randomPlay);Qa.find(".hap-btn").hide();c.randomPlay?Qa.find(".hap-btn-random-on").show():Qa.find(".hap-btn-random-off").show()};this.setLoop=function(a){if(!y||"undefined"===typeof O)return!1;qb.find(".hap-btn").hide();c.loopState=a;rb=Yb.indexOf(c.loopState);qb.find(".hap-btn-loop-"+c.loopState).show();O.setLooping(c.loopState)};this.getVolume=function(){return xb};this.setVolume=
function(a){if(!y)return!1;0>a?a=0:1<a&&(a=1);za&&za.setVolume(a)};this.toggleMute=function(){if(!y)return!1;za&&za.toggleMute()};this.setAutoPlay=function(a){qa=a};this.disableSeek=function(a){ee=a};this.seek=function(a){if(!y||!p)return!1;if("youtube"==p)E&&sa&&E.seekTo(a);else if("audio"==p&&w)try{w.currentTime=a}catch(b){console.log(b)}};this.seekBackward=function(a){if(!y||!p)return!1;if("youtube"==p)E&&sa&&(a=Math.max(E.getCurrentTime()-(a||seekTime),0),E.seekTo(a));else if("audio"==p&&w)try{w.currentTime=
Math.max(w.currentTime-(a||seekTime),0)}catch(b){console.log(b)}};this.seekForward=function(a){if(!y||!p)return!1;if("youtube"==p)E&&sa&&(a=Math.min(E.getCurrentTime()+(a||seekTime),E.getDuration()),E.seekTo(a));else if("audio"==p&&w)try{w.currentTime=Math.min(w.currentTime+(a||seekTime),w.duration)}catch(b){console.log(b)}};this.getCurrentMediaUrl=function(){if(!y)return!1;if(!p)return"";var a=-1==window.location.href.indexOf("?")?"?":"&";var b="hap-query-instance="+encodeURIComponent(c.instanceName),
d=void 0!=m.mediaId?"&hap-media-id="+m.mediaId:"&hap-active-item="+Na,e=Sb?"&hap-resume-time="+Math.floor(q.getCurrentTime()):"";a=a+b+"&hap-scroll-to-player=1"+d+e;void 0!=m.mediaId&&-1==Be.indexOf(m.origtype)&&m.safeTitle&&(b="&hap-media-title="+encodeURIComponent(m.safeTitle),a+=b);return a};this.getCurrentTime=function(){if("youtube"==p)return E&&sa?E.getCurrentTime():0;if("audio"==p){if(w)return w.currentTime}else return 0};this.getDuration=function(){if(!y||!p)return!1;if("youtube"==p){if(E&&
sa)return E.getDuration()}else if("audio"==p&&w)return w.duration};this.destroyPlaylistScroll=function(){if(!y)return!1;c.usePlaylistScroll&&(Wa.mCustomScrollbar("destroy"),bc=!1)};this.getSetupDone=function(){return y};this.getMediaPlaying=function(){return y?hb:!1};this.getPlaylistLoading=function(){return ba};this.getCounter=function(){return y?"undefined"!==typeof O?O.getCounter():-1:null};this.getPlaylistContent=function(){return x};this.getPlaylistData=function(){return R};this.getLastPlaylistData=
function(){return y?gd:!1};this.getPlaylistLength=function(){return y?HAPUtils.isNumber(z)?z:0:!1};this.getPlaylistList=function(){return cd};this.getSettings=function(){return c};this.getCurrMediaData=function(){return y?m:!1};this.getWrapper=function(){return n};this.getPlaylistItems=function(){if(!y)return!1;var a=[];x.find(".hap-playlist-item").each(function(){a.push(f(this))});return a};this.openPopup=function(){if(!y||c.isPopup)return!1;hapOpenPopup(c,q)};this.togglePlaylist=function(){if(-1<
ea.indexOf("hap-art-narrow-light")||-1<ea.indexOf("hap-art-narrow-dark"))c.playlistOpened?(Tc.stop().animate({left:"0px"},{duration:350}),Fa.stop().animate({left:-Tc.width()+"px"},{duration:350})):(Tc.stop().animate({left:Tc.width()+"px"},{duration:350}),Fa.stop().animate({left:"0px"},{duration:350}));else if(-1<ea.indexOf("hap-art-wide-light")||-1<ea.indexOf("hap-art-wide-dark")||-1<ea.indexOf("hap-brona-light")||-1<ea.indexOf("hap-brona-dark"))if(c.playlistOpened)Fa.stop().animate({height:"0px"},
{duration:350});else{var a=Fa.css("height","auto").height();Fa.height(0).stop().animate({height:a+"px"},{duration:350,complete:function(){f(this).height("auto")}})}else-1<ea.indexOf("hap-wall")?c.playlistOpened?Fa.css("left","-20000px"):Fa.css("left",0):-1<ea.indexOf("hap-classic")?c.playlistOpened?Fa.slideUp():Fa.slideDown():-1<ea.indexOf("hap-fixed")&&(c.playlistOpened?n.stop().animate({bottom:-Fa.height()+"px"},{duration:350}):n.stop().animate({bottom:"0px"},{duration:350}));c.playlistOpened=!c.playlistOpened};
if(ce&&c.continousKey)if(!Qc)localStorage.removeItem(c.continousKey);else if(localStorage.getItem(c.continousKey)){var Nb=JSON.parse(localStorage.getItem(c.continousKey));c.activePlaylist=Nb.activePlaylist;c.resumeTime=Nb.resumeTime;c.volume=Nb.volume;c.activeItem=Nb.activeItem;qa=c.autoPlay=Nb.autoPlay;c.lastPositionArr=Nb.lastPositionArr;localStorage.removeItem(c.continousKey)}setTimeout(function(){if(c.isPopup&&c.copyCurrentPlaylistToPopup){R=c.playlistDataArr;z=R.length;O.setPlaylistItems(z,!1);
if(c.useStatistics){if(!c.usePlaylist){var a;for(a=0;a<z;a++)R[a].data.hapStatsSet=!1}Ec()}sb=x;if(c.usePlaylist&&c.addPlaylistEvents){var b;x.find(".hap-playlist-item").each(function(){b=f(this).find(".hap-playlist-item-content").on("click",A);if(!ac)b.on("mouseenter",ha).on("mouseleave",I)})}Fc()}else od.length?(ba=!0,ta.show(),f(q).trigger("playlistStartLoad",{instance:q,instanceName:c.instanceName}),aa=od,z=aa.length,v()):c.activePlaylist&&!HAPUtils.isEmpty(c.activePlaylist)?Ua(c.activePlaylist):
Fc()},50);return this}})(jQuery);var hap_popup_window,hap_player_instance,hap_player_auto_instance,hasLocalStorage=HAPUtils.hasLocalStorage();
function hapOpenPopup(f,c){if(!hasLocalStorage||!localStorage.getItem("hap_popup")){hap_player_instance=c;var g=f.popupUrl||f.sourcePath+"popup.html?rand="+99999999*Math.random(),u=f.popupWidth||hap_player_instance.width(),t=f.popupHeight||hap_player_instance.height(),B=(window.screen.width-parseInt(u,10))/2,H=(window.screen.height-parseInt(t,10))/2;if(!hap_popup_window||hap_popup_window.closed)if(hap_popup_window=window.open(g,"audio_player","menubar=no,toolbar=no,location=no,scrollbars=1,resizable,width="+
u+",height="+t+",left="+B+",top="+H),!hap_popup_window)return alert("Player can not be opened in a popup window because your browser is blocking Pop-Ups. You need to allow Pop-Ups in browser for this site to use the Player."),!1}}
function hapNotifyParent(){if(hap_popup_window&&void 0!=hap_popup_window.initPopup){if(hap_player_instance){var f=hap_player_instance.getSettings();f.volume=hap_player_instance.getVolume();f.activePlaylist=f.activePlaylist;f.activeItem=hap_player_instance.getCounter();f.resumeTime=hap_player_instance.getCurrentTime();f.autoPlay=hap_player_instance.getMediaPlaying();f.copyCurrentPlaylistToPopup?(f.playlistDataArr=hap_player_instance.getPlaylistData(),hap_player_instance.destroyInstance2()):hap_player_instance.destroyInstance();
var c=hap_player_instance.getWrapper()}else hap_player_auto_instance&&(f=hap_player_auto_instance.settings,f.copyCurrentPlaylistToPopup=!1,c=hap_player_auto_instance.wrapper);var g=c.attr("id"),u=hapjq("#hap-inline-css").clone().wrap("<p>").parent().html(),t=hapjq("#hap-playlist-list").remove().wrap("<p>").parent().html();c=c.remove().wrap("<p>").parent().html();try{window[f.instanceName]=hap_popup_window.initPopup(c,g,f,u,t)}catch(B){return alert("initPopup error: "+B.message),!1}}};