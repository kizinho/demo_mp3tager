(function(B,I){B.MVPPlaylistNavigation=function(q){function E(){var f,l,g,b,a,e=!1;c.off("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").on("touchstart.ap",function(d){if(!n.getSetupDone()||n.isPlaylistLoading())return!1;d=d.originalEvent.touches[0];f=c.position().left;l=c.position().top;g=d.pageX;b=d.pageY;a=!1;e=!0}).on("touchmove.ap",function(d){if(e){d=d.originalEvent.touches[0];r.show();m.show();if("h"==u){var k=f-g+d.pageX,z=w.width(),A=c.width();if(A<z)return;0<k?(k=0,r.hide()):
k<=z-A&&(k=z-A,m.hide(),loadMoreOnTotalScroll?nextPageToken&&loadMoreType&&(playlistTransitionOn||C.loadMore()):addMoreOnTotalScroll&&(loadMoreProcess||addMore()));c.css("left",k+"px")}else{k=l-b+d.pageY;z=w.height();A=c.height();if(A<z)return;0<k?(k=0,r.hide()):k<=z-A&&(k=z-A,m.hide(),n.totalScrollAction());c.css("top",k+"px")}a=a||5<Math.abs(g-d.pageX)||5<Math.abs(b-d.pageY);return!1}}).on("touchend.ap",function(d){e=!1}).on("click.ap-touchclick",function(d){if(a)return a=!1})}var C=this,F=MVPUtils.isMobile(),
D="ontouchstart"in B,n=q.parent,G=q.wrapper,w=q.playlistHolder,h=q.playlistInner,c=q.playlistContent,r=G.find(".mvp-nav-backward"),m=G.find(".mvp-nav-forward"),u=q.navigationDirection,v=q.navigationType,p=q.pi_size,H=q.thumbScrollValue,x=!0,y,t;this.checkPlaylistNavigation=function(){if("scroll"==v)if("undefined"===typeof mCustomScrollbar)if(B.playlistScrollLoading)var f=setInterval(function(){B.playlistScrollLoading||(clearInterval(f),C.checkPlaylistNavigation())},100);else{B.playlistScrollLoading=
!0;var l=document.createElement("script");l.type="text/javascript";var g=MVPUtils.relativePath(q.mCustomScrollbar_js)?q.mCustomScrollbar_js:MVPUtils.qualifyURL(q.sourcePath+q.mCustomScrollbar_js);l.src=g;l.onload=l.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(C.checkPlaylistNavigation(),B.playlistScrollLoading=!1)};l.onerror=function(){alert("Error loading "+this.src)};g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(l,g)}else h.mCustomScrollbar({axis:"h"==
u?"x":"y",theme:q.playlistScrollTheme,scrollInertia:0,scrollButtons:{enable:!0},mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){h.find(".mCSB_container").addClass("mvp-mCSB_full")},onOverflowY:function(){h.find(".mCSB_container").removeClass("mvp-mCSB_full")},onTotalScroll:function(){n.totalScrollAction()},alwaysTriggerOffsets:!1}});else if("buttons"==v){if(!F)h.on("mousewheel DOMMouseScroll",
function(b){if(!n.getSetupDone()||n.isPlaylistLoading()||!x)return!1;if("h"==u)var a=h.width(),e=c.width(),d="translateX";else a=h.height(),e=c.height(),d="translateY";if(!(e<a)){r.show();m.show();if(b.originalEvent.wheelDelta)var k=0<b.originalEvent.wheelDelta?1:-1;else b.originalEvent.detail&&(k=0>b.originalEvent.detail?1:-1);t?b=t:(b=c[0].style.transform.replace(/[^\d.]/g,""),b=parseInt(b)||0);b+=H*k;0<b?(b=0,r.hide()):b<=a-e&&(b=a-e,m.hide(),n.totalScrollAction());t=b;c.css({"-webkit-transform":""+
d+"("+b+"px)","-ms-transform":""+d+"("+b+"px)",transform:""+d+"("+b+"px)"});return!1}});r.on("click",function(){if(!n.getSetupDone()||n.isPlaylistLoading()||y)return!1;y=!0;if("h"==u)var b=h.width(),a=c.width(),e="translateX";else b=h.height(),a=c.height(),e="translateY";if(!(a<b)){r.show();m.show();t?a=t:(a=c[0].style.transform.replace(/[^\d.]/g,""),a=parseInt(a)||0);if(0!=a%p){for(var d=-(a%p);d<=b-2*p;)d+=p;a+=d}else a+=p*Math.floor(b/p);0<=a&&(a=0,r.hide());t=a;c.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",
function(){y=!1}).css({"-webkit-transform":""+e+"("+a+"px)","-ms-transform":""+e+"("+a+"px)",transform:""+e+"("+a+"px)"})}});m.on("click",function(){if(!n.getSetupDone()||n.isPlaylistLoading()||y)return!1;y=!0;if("h"==u)var b=h.width(),a=c.width(),e="translateX";else b=h.height(),a=c.height(),e="translateY";if(!(a<b)){r.show();m.show();if(t)var d=t;else d=c[0].style.transform.replace(/[^\d.]/g,""),d=parseInt(d)||0;if(0!=d%p){for(var k=d%p+p;k<=b-p;)k+=p;d-=k}else d-=p*Math.floor(b/p);d<=b-a&&(d=b-
a,m.hide(),n.totalScrollAction());t=d;c.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){y=!1}).css({"-webkit-transform":""+e+"("+d+"px)","-ms-transform":""+e+"("+d+"px)",transform:""+e+"("+d+"px)"})}});D&&E()}else if("hover"==v){if(!F)h.on("mousemove",function(b){if(!n.getSetupDone()||n.isPlaylistLoading()||!x)return!1;if("h"==u){var a=w.width(),e=c.width();if(e<a)return;var d=parseInt(h.css("left"),10)+w.offset().left;b=(a-e)/a*(b.pageX-d);c.css("left",b+"px")}else{a=
w.height();e=c.height();if(e<a)return;d=parseInt(h.css("top"),10)+w.offset().top;b=(a-e)/a*(b.pageY-d);c.css("top",b+"px")}return!1});D&&E()}};this.scrollTo=function(f){if("scroll"==v)if("undefined"!==typeof mCustomScrollbar)setTimeout(function(){"h"==u?h.mCustomScrollbar("scrollTo",parseInt(f.position().left),{scrollInertia:500}):h.mCustomScrollbar("scrollTo",parseInt(f.position().top),{scrollInertia:500})},500);else var l=setInterval(function(){"undefined"!==typeof mCustomScrollbar&&(clearInterval(l),
"h"==u?h.mCustomScrollbar("scrollTo",parseInt(f.position().left),{scrollInertia:500}):h.mCustomScrollbar("scrollTo",parseInt(f.position().top),{scrollInertia:500}))},500);else if("buttons"==v){if("h"==u)var g=w.width(),b=c.width(),a="translateX";else g=w.height(),b=c.height(),a="translateY";if(!(b<g)){r.show();m.show();var e=-c.find(".mvp-playlist-item").index(f)*p;0<=e?(e=0,r.hide()):e<=g-b&&(e=g-b,m.hide());t=e;c.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){y=
!1}).css({"-webkit-transform":""+a+"("+e+"px)","-ms-transform":""+a+"("+e+"px)",transform:""+a+"("+e+"px)"})}}};this.showButtons=function(f){"forward"==f&&m.show()};this.resize=function(f){if("buttons"==v){if("h"==u)var l=h.width(),g=c.width(),b="translateX";else l=h.height(),g=c.height(),b="translateY";console.log(l,g);if(g<l)x=!1,r.hide(),m.hide();else{x=!0;var a=f?-c.find(".mvp-playlist-item").index(f)*p:0;t?a=t:(a=c[0].style.transform.replace(/[^\d.]/g,""),a=parseInt(a));0<a?(a=0,m.show()):a<
l-g?(a=l-g,r.show()):isNaN(a)&&!n.getMediaType()&&m.show();t=a;setTimeout(function(){c.css({"-webkit-transform":""+b+"("+a+"px)","-ms-transform":""+b+"("+a+"px)",transform:""+b+"("+a+"px)"})},350)}}else"hover"==v&&("h"==u?(f=h.width(),g=c.width(),g<f?x=!1:(x=!0,a=parseInt(c.css("left"),10),0<a?a=0:a<f-g&&(a=f-g),c.css("left",a+"px"))):(f=h.height(),g=c.height(),g<f?x=!1:(x=!0,a=parseInt(c.css("top"),10),0<a?a=0:a<f-g&&(a=f-g),c.css("top",a+"px"))))};this.setScrollActive=function(){y=!1};this.destroy=
function(){if("scroll"==v)"undefined"!==typeof mCustomScrollbar&&h.mCustomScrollbar("destroy");else if("buttons"==v){h.off("mousewheel DOMMouseScroll");r.off("click");m.off("click");var f="h"==u?"translateX":"translateY";t=0;c.css({"-webkit-transform":""+f+"(0px)","-ms-transform":""+f+"(0px)",transform:""+f+"(0px)"})}else"hover"==v&&h.off("mousemove");D&&c.off("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick");"h"==u?c.css("left",0):c.css("top",0)};C.checkPlaylistNavigation()}})(window,
jQuery);